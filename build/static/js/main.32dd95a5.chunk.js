(this.webpackJsonpSkySpaces=this.webpackJsonpSkySpaces||[]).push([[0],{1033:function(e,t){},1117:function(e,t,n){},1118:function(e,t,n){},1119:function(e,t,n){},1120:function(e,t,n){},1253:function(e,t){},1255:function(e,t){},1258:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),o=n.n(s),i=(n(838),n(839),n(29)),c=n(30),l=n(36),p=n(35),u=(n(588),n(313)),d=n(117),f=n(16);var h=Object(f.b)((function(e){return{isShowing:e.snLoader}}))((function(e){return r.a.createElement(r.a.Fragment,null,e.isShowing&&r.a.createElement("div",{className:"sn-loader-overlay"},r.a.createElement("div",{className:"loader"})))})),m=n(6),y=n(1315),k=n(98),S=n(56),b=n(52),g=n(22),v=n(5),E=n.n(v),O=n(7),C=n(59),w=n(1299),j=function(e){var t=[];return null!=e&&(t=Array.isArray(e)?e.map((function(e){return e.toLowerCase()})):[e.toLowerCase()]),JSON.parse(JSON.stringify(t))},A=function(e){if(null!=e){var t={};return e.forEach((function(e){t[e]={label:e}})),t}},x="var(--app-bg-color)",T=localStorage,I="https://core.blockstack.org/v1/names",P="https://siasky.net/",L=n(92),D="skhub/skylink/data/",N="skhub/skylink/skylinkIdx.json",_="skhub/skyspaces/",M="skhub/skyspaces/skyspaceIdx.json",U="skhub/history/history.json",F="skhub/settings/portals/portals.json",K="failed",R=["skhub/settings/usersetting.json",F],H={name:"SkySpaces",icon:"https://skyspaces.io/logo192.png"},B=new L.AppConfig(["store_write","publish_data"]),Y=new L.UserSession({appConfig:B}),W=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubIdList:[]}},J=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skyspaceList:[]}},G=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skyspace:"",skhubIdList:[]}},z=(new Date,new Date,{version:"v1",createTS:new Date,lastUpdateTS:new Date,portals:[{createTS:new Date,name:"SkynetHub.io",url:"https://skynethub.io/",type:"public",selected:1},{createTS:new Date,name:"SiaSky.net",url:"https://siasky.net/",type:"public",selected:0},{createTS:new Date,name:"SiaCDN.com",url:"https://www.siacdn.com",type:"public",selected:0}]}),V=n(116),Z=n(18),Q=n(534),q=n.n(Q),X=n(773),$=n.n(X),ee=n(1305),te=n(704),ne=n(520),ae=n.n(ne),re=n(209),se=n(144),oe=n.n(se),ie=n(1306),ce=n(825),le=n(183),pe=n(788),ue=n.n(pe),de=n(793),fe=n.n(de),he=n(791),me=n.n(he),ye=n(795),ke=n.n(ye),Se=n(790),be=n.n(Se),ge=n(794),ve=n.n(ge),Ee=n(789),Oe=n.n(Ee),Ce=n(796),we=n.n(Ce),je=n(792),Ae=n.n(je),xe=n(1289),Te=n(2),Ie=n(392),Pe=n.n(Ie),Le=n(769),De=n(227),Ne=n.n(De),_e=n(254),Me=n(391),Ue=n(649),Fe=n(261),Ke=n.n(Fe),Re=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props.app,n=this.props.source;return r.a.createElement("div",{className:Object(Te.default)({"card-btn-container":!0,"margin-auto":"img"===n})},(null==this.props.hideTags||!this.props.hideTags)&&(null===(e=t.tags)||void 0===e?void 0:e.length)>0&&r.a.createElement("div",{className:"card-tag-parent"},r.a.createElement("div",{className:"card-tag-container pl-20"},r.a.createElement("span",{className:"pr-2 pl-2"},r.a.createElement("b",null,"Tags:"))," ",t.tags.map((function(e,t){return r.a.createElement(Le.a,{key:t,label:e,variant:"outlined",size:"small"})})))),null==this.props.hash&&r.a.createElement(xe.a,{disableSpacing:!0,className:Object(Te.default)({"full-width":!0,"no-padding-b":"img"!==n,"vertical-padding-0":"img"===n})},r.a.createElement("div",{className:"margin-l-auto"},(null==this.props.hideAdd||!1===this.props.hideAdd)&&r.a.createElement(Ue.a,{title:"Add to other Spaces",arrow:!0},r.a.createElement(Me.a,{onClick:this.props.onAdd,style:{color:x}},r.a.createElement(Ne.a,null))),r.a.createElement(Ue.a,{title:"Edit Skylink",arrow:!0},r.a.createElement(Me.a,{onClick:this.props.onEdit,style:{color:x}},r.a.createElement(Pe.a,null))),!1===this.props.hideDelete&&r.a.createElement(Ue.a,{title:"Remove from this Space",arrow:!0},r.a.createElement(Me.a,{onClick:this.props.onDelete,color:"secondary"},r.a.createElement(Ke.a,null))))))}}]),n}(r.a.Component),He=Object(m.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)},avatar:{backgroundColor:_e.a[500]},expand:{transform:"rotate(0deg)",marginLeft:"0px",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}))(Re),Be=n(703),Ye=function(e){return{type:"CHANGE_LOADER_STATE",payload:e}},We=n(207),Je=n.n(We),Ge=n(206),ze=n.n(Ge),Ve=n(776),Ze=n.n(Ve),Qe=n(1300),qe=n(1302),Xe=n(38),$e=function(){return{version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubId:"",skylink:"",id:null,name:"",title:"",filename:"",description:"",type:null,contentLength:"",contentType:"",httpMetadata:"",redirect:!1,defaultPath:"",linkType:tt,category:tt,skyspaceList:[],tags:[],userId:"",permission:!1,ageRating:"",price:"",support:"",git_url:"",demo_url:"",developer:"",appStatus:"",blacklist:"",blacklistDate:"",blacklistReason:"",auth_code:"",fileKey:null}},et=function(){var e={};for(var t in $e())$e().hasOwnProperty(t)&&(e[t]=!1,e[t+".errorMsg"]="");return e},tt=0,nt=new L.AppConfig(["store_write","publish_data"]),at=(new L.UserSession({appConfig:nt}),function(){var e=T.getItem("USER_SESSION");if(null!=e)return JSON.parse(e);var t=new L.AppConfig(["store_write","publish_data"]);return new L.UserSession({appConfig:t})}),rt=n(381),st=n(433),ot=n(1291),it=n(262),ct=n(1323),lt=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APPSTORE_HOST,pt=function(e){return ha.dispatch(Ye(!0)),{type:"FETCH_APPS",payload:e}},ut=function(e){return ha.dispatch(Ye(!0)),{type:"ACT_TY_FETCH_PUBLIC_APPS",payload:e}},dt=function(e){return ha.dispatch(Ye(!1)),{type:"FETCH_APPS_SUCCESS",payload:e}},ft=function(e){return{type:"ACT_TY_SET_APPS",payload:e}},ht=function(e){return ha.dispatch(Ye(!1)),{type:"FETCH_ALL_SKYLINKS",payload:e.session}},mt=function(e){return ha.dispatch(Ye(!0)),{type:"FETCH_SKYSPACE_APPS",payload:e}},yt=n(377),kt=n.n(yt),St=n(1290),bt=n(43),gt=n(778),vt=n(777),Et=n.n(vt),Ot=function(e){return Object(ct.a)({url:e+"?format=concat",method:"HEAD",responseType:""}).pipe(Object(it.a)((function(e){var t={},n=e.xhr.getResponseHeader("content-type");t.contentType=n,console.log("contentType:"+n);var a=e.xhr.getResponseHeader("content-length");t.contentLength=a?Et()(Number(a)):"",console.log("contentLength:"+a);var r=e.xhr.getResponseHeader("Skynet-File-Metadata");return t.skynetFileMetadata=r,t})),Object(St.a)((function(e){return console.log("getSkylinkHeader::error: ",e),Object(gt.a)(e)})))},Ct=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uploadFile(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wt=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((-1===document.location.origin.indexOf("localhost")?document.location.origin:P)+"/"+t).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jt=function(e){var t=JSON.stringify(e);return new File([t],"public"+new Date+".txt",{type:"text/plain",lastModified:new Date})},At=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(t);case 2:return a=e.sent,r=wr(a.data,n.addedSkapps,n.deletedSkapps),a.history[a.history.length-1].skylink=t,a.history.push({creationDate:new Date}),a.data=r,s=jt(a),o=-1===document.location.origin.indexOf("localhost")?document.location.origin:P,e.next=11,new bt.SkynetClient(o).uploadFile(s);case 11:if(!(i=e.sent)){e.next=14;break}return e.abrupt("return",{skylink:Object(bt.parseSkylink)(i)});case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xt=function(){var e,t,n=null===(e=ha.getState().snUserSetting)||void 0===e||null===(t=e.setting)||void 0===t?void 0:t.portal;return n=n&&""!==n.trim()?n:P},Tt=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r,s,o,i){var c,l,p,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=new bt.SkynetClient(xt()),null!=t&&null!=n){e.next=3;break}throw new Error("Invalid Keys");case 3:return e.next=5,Pt(t,a,null,{getEntry:!0});case 5:if(l=e.sent,!s){e.next=11;break}return e.next=9,Pt(t,a);case 9:p=e.sent,null!=r&&null!=p&&(r=p.push(r));case 11:return e.prev=11,u=(l?l.revision:0)+1,e.next=15,c.db.setJSON(n,a,r,u);case 15:e.sent,e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(11),e.abrupt("return",!1);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t,n,a,r,s,o,i){return e.apply(this,arguments)}}(),It=function(e){return Object(bt.genKeyPairFromSeed)(e)},Pt=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r){var s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new bt.SkynetClient(xt()),e.prev=1,null!=t){e.next=4;break}throw new Error("Invalid Keys");case 4:return e.next=6,s.db.getJSON(t,n);case 6:if(!(o=e.sent)){e.next=11;break}if(!r.getEntry){e.next=10;break}return e.abrupt("return",o);case 10:return e.abrupt("return",o.data);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),console.log("error.message "+e.t0.message),e.abrupt("return",null);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,a,r){return e.apply(this,arguments)}}();function Lt(e){return kt.a.createHash("sha256").update(e+new Date).digest("base64").replace("/","+")}function Dt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.listFiles((function(e){return n.push(e),!0}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(O.a)(E.a.mark((function e(t,n,a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=jr(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,8);break;case 4:case 6:return r=new Promise((function(e,t){e(n)})),e.abrupt("break",9);case 8:r=t.encryptContent(n,a);case 9:return e.next=11,r;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(O.a)(E.a.mark((function e(t,n,a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=jr(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,8);break;case 4:case 6:return r=new Promise((function(e,t){e(n)})),e.abrupt("break",9);case 8:r=t.decryptContent(n,a);case 9:return e.next=11,r;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kt=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(t,n,null,{});case 2:return a=e.sent,e.abrupt("return",JSON.parse(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Rt(e,t,n){var a,r;switch(jr(e)){case"SKYID":var s;if(null===n||void 0===n?void 0:n.publicKey)r=Pt(n.publicKey,t,null,{}).then((function(e){if(e)return e}));else r=Pt(null===e||void 0===e||null===(s=e.person)||void 0===s?void 0:s.appPublicKey,t,null,{}).then((function(e){if(e)return e}));break;case"SKYDB_ID":var o=It(e.skydbseed).publicKey;r=Pt(o,t,null,{}).then((function(e){if(e)return e}));break;case"BLOCKSTACK_ID":default:var i={decrypt:null===(a=null===n||void 0===n?void 0:n.decrypt)||void 0===a||a};r=e.getFile(t,i).then((function(e){return JSON.parse(e)}))}return r.catch((function(e){return"does_not_exist"===e.code?null:e}))}function Ht(e,t,n,a){var r,s,o,i;switch(n.hasOwnProperty("lastUpdateTS")&&(n.lastUpdateTS=new Date),jr(e)){case"SKYID":i=Tt(null===e||void 0===e||null===(r=e.person)||void 0===r?void 0:r.appPublicKey,null===e||void 0===e||null===(s=e.person)||void 0===s?void 0:s.appPrivateKey,t,n,!1,!1,{});break;case"SKYDB_ID":var c=It(e.skydbseed),l=c.publicKey,p=c.privateKey;i=Tt(l,p,t,n,!1,!1,{});break;case"BLOCKSTACK_ID":default:var u={decrypt:null===(o=null===a||void 0===a?void 0:a.decrypt)||void 0===o||o};i=e.putFile(t,JSON.stringify(n),u)}return i.catch((function(e){if("precondition_failed_error"!==(null===e||void 0===e?void 0:e.code))throw e}))}function Bt(e,t,n){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o,i,c,l,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=jr(t),e.t0=o,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,9);break;case 4:return i=Tt(null===t||void 0===t||null===(r=t.person)||void 0===r?void 0:r.appPublicKey,null===t||void 0===t||null===(s=t.person)||void 0===s?void 0:s.appPrivateKey,n,a,!1,!1,{}),e.abrupt("break",17);case 6:return c=It(t.skydbseed),l=c.publicKey,p=c.privateKey,i=Tt(l,p,n,a,!1,!1,{}),e.abrupt("break",17);case 9:return e.prev=9,e.next=12,Wt(t,n);case 12:e.next=16;break;case 14:e.prev=14,e.t1=e.catch(9);case 16:i=t.putFile(n,a,{encrypt:!1,dangerouslyIgnoreEtag:!0});case 17:i.catch((function(e){if("precondition_failed_error"!==(null===e||void 0===e?void 0:e.code))throw e}));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})))).apply(this,arguments)}function Wt(e,t){var n,a,r;switch(jr(e)){case"SKYID":r=Tt(null===e||void 0===e||null===(n=e.person)||void 0===n?void 0:n.appPublicKey,null===e||void 0===e||null===(a=e.person)||void 0===a?void 0:a.appPrivateKey,t,null,!1,!1,{});break;case"SKYDB_ID":var s=It(e.skydbseed),o=s.publicKey,i=s.privateKey;r=Tt(o,i,t,null,!1,!1,{});break;case"BLOCKSTACK_ID":default:r=e.deleteFile(t,{encrypt:!0})}return r}var Jt=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a){e.next=2;break}return e.abrupt("return");case 2:return r=n.skhubId,!n||null!=n.skhubId&&""!==n.skhubId||(r=Lt("BLOCKSTACK:"+a.profile.did+":"+n.skylink),n.skhubId=r),s=D+r+".json",e.next=7,Ht(t,s,n);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(t,N);case 2:if((a=e.sent)!==K){e.next=5;break}return e.abrupt("return",a);case 5:return a||(a=W()),a.skhubIdList=Object(g.a)(new Set([].concat(Object(g.a)(a.skhubIdList),Object(g.a)(n)))),e.abrupt("return",Ht(t,N,a));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zt=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("person",a),null!=a){e.next=3;break}return e.abrupt("return");case 3:return r=n.skhubId,!n||null!=n.skhubId&&""!==n.skhubId||(r=Lt("BLOCKSTACK:"+a.profile.did+":"+n.skylink),n.skhubId=r),s=D+r+".json",e.abrupt("return",Ht(t,s,n).then((function(e){return e===K?e:Rt(t,N)})).then((function(e){if(e===K)return e;if(e){if(e.skhubIdList.indexOf(r)>-1)return K}else e=W();return e.skhubIdList.push(r),Ht(t,N,e)})).then((function(e){return r})).catch((function(e){return K})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Vt=function(e){return Rt(e,N).catch((function(e){return null}))},Zt=function(e,t){return Rt(e,D+t+".json").then((function(e){return e}))},Qt=function(e,t){return Wt(e,D+t+".json").then((function(t){return Rt(e,N)})).then((function(n){if(n&&n.skhubIdList.indexOf(t)>-1){var a=n.skhubIdList.indexOf(t);return n.skhubIdList.splice(a,1),Ht(e,N,n)}return K})).catch((function(e){return K}))},qt=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n.map((function(e){var n=G();n.skyspace=e;var r=_+e+".json";a.push(Ht(t,r,n))})),e.next=4,Promise.all(a);case 4:return e.next=6,Rt(t,M);case 6:return(r=(r=e.sent)||J()).skyspaceList=Object(g.a)(new Set([].concat(Object(g.a)(r.skyspaceList),Object(g.a)(n)))),e.next=11,Ht(t,M,r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=_+n+".json",e.next=4,Rt(t,M);case 4:if(s=e.sent){e.next=10;break}s=J(),null==a&&s.skyspaceList.push(n),e.next=24;break;case 10:if(!(s&&s.skyspaceList.indexOf(n)>-1)){e.next=19;break}if(null!=a){e.next=15;break}return e.abrupt("return",K);case 15:o=s.skyspaceList.indexOf(n),s.skyspaceList.splice(o,1);case 17:e.next=24;break;case 19:if(null!=a){e.next=23;break}s.skyspaceList.push(n),e.next=24;break;case 23:return e.abrupt("return",K);case 24:return e.next=26,Ht(t,M,s);case 26:if(null!=a){e.next=33;break}return(i=G()).skyspace=n,e.next=31,Ht(t,r,i);case 31:e.next=35;break;case 33:return e.next=35,Wt(t,r);case 35:return e.abrupt("return","success");case 38:return e.prev=38,e.t0=e.catch(0),e.abrupt("return",K);case 41:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t,n,a){return e.apply(this,arguments)}}(),$t=function(e,t,n){var a=_+t+".json",r=_+n+".json";return Rt(e,M).then((function(a){if(a&&a.skyspaceList.indexOf(t)>-1){var r=a.skyspaceList.indexOf(t);return a.skyspaceList.splice(r,1,n),Ht(e,M,a)}return K})).then((function(t){return t===K?K:Rt(e,a)})).then((function(t){return null==t||t===K?K:(t.skyspace=n,Ht(e,r,t))})).then((function(t){return Wt(e,a)})).catch((function(e){}))},en=function(e){return Rt(e,M).then((function(t){return t&&t.skyspaceList?t.skyspaceList:t&&"FailedDecryptionError"===t.name?Wt(e,M).then((function(){return[]})):[]})).catch((function(e){return[]}))},tn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,en(t);case 3:return a=e.sent,r=[],a.forEach((function(e){r.push(on(t,e).then((function(t){n[e]=t.skhubIdList})))})),e.next=8,Promise.all(r);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(e,t,n){var a=[];return n.forEach((function(n){a.push(ln(e,n,t).catch((function(e){return""})))})),Promise.all(a).then((function(){}))},an=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a.forEach((function(e){r.push(cn(t,e,n).catch((function(e){return""})))})),e.next=4,Promise.all(r);case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),rn=function(e,t){var n=[];return en(e).then((function(a){var r=[];return a.forEach((function(a){r.push(on(e,a).then((function(e){null!=e&&e.skhubIdList.indexOf(t)>-1&&n.push(a)})))})),Promise.all(r).then((function(){return n}))})).then((function(n){var a=!1;return Vt(e).then((function(e){return null!=e&&e.skhubIdList.includes(t)&&(a=!0),{skyspaceForSkhubIdList:n,isAppOwner:a}}))}))},sn=function(e,t){var n=[];return on(e,t).then((function(t){var a=t.skhubIdList;if(null==a)return[];var r=[];return a.forEach((function(t){r.push(Zt(e,t).then((function(e){n.push(e)})))})),Promise.all(r).then((function(){return n}))}))},on=function(e,t){return Rt(e,_+t+".json").then((function(e){return e}))},cn=function(e,t,n){return on(e,t).then((function(a){var r=_+t+".json";return n=Array.isArray(n)?n:[n],a.skhubIdList=Object(g.a)(new Set([].concat(Object(g.a)(a.skhubIdList),Object(g.a)(n)))),Ht(e,r,a)}))},ln=function(e,t,n){return on(e,t).then((function(a){if(a&&a.skhubIdList.indexOf(n)>-1){var r=a.skhubIdList.indexOf(n);return a.skhubIdList.splice(r,1),Ht(e,_+t+".json",a)}return K})).catch((function(e){return K}))},pn=function(e){return Rt(e,U).then((function(t){return null==t?[]:t&&"FailedDecryptionError"===t.name?Wt(e,U).then((function(){return[]})):t})).catch((function(e){return[]}))},un=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t).then((function(e){null==e&&(e=[]),n.timestamp=new Date;var t=e.findIndex((function(e){var t=!1;return e.skhubId&&e.skhubId===n.skhubId&&(t=!0),t}));return t>-1?(e[t].savedToSkySpaces=n.savedToSkySpaces,e[t].skyspaces=n.skyspaces):e.push(n),e})).then((function(e){return Ht(t,U,e)})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,U,n);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fn=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,U,[]);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(t,"skhub/settings/usersetting.json");case 2:return n=e.sent,e.abrupt("return",n||{version:"v1",createTS:new Date,lastUpdateTS:new Date,setting:{portal:P,backupList:[]}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,"skhub/settings/usersetting.json",n);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,Rt(t,"profile",{publicKey:t.skyid.userId});case 3:return""==(a=e.sent)?console.log("Profile not found;, please check your connection and retry"):(r=JSON.parse(a),s=It(t.skyid.seed),o=s.publicKey,i=s.privateKey,n={masterPublicKey:t.skyid.userId,appSeed:t.skyid.seed,appId:t.skyid.appId,appImg:t.skyid.appImg,appPublicKey:o,appPrivateKey:i,profile:{username:r.username,did:r.username,aboutme:r.aboutMe,location:r.location,avatar:r.avatar,profilePicture:r.profilePicture}}),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(t,F);case 2:return null==(n=e.sent)?n=z:null!=n.portals&&0!==n.portals.length||(n.portals=z.portals),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,F,n);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),bn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(t);case 2:return n=e.sent,a=[],r=[],n.forEach((function(e){-1===R.indexOf(e)&&a.push(Rt(t,e).then((function(t){var n={path:e,contentStr:JSON.stringify(t)};r.push(n)})))})),e.next=8,Promise.all(a);case 8:return e.next=10,_t(t,JSON.stringify(r));case 10:return s=e.sent,e.abrupt("return",new File([s],"backup"+new Date+".txt",{type:"text/plain",lastModified:new Date}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return a=e.sent,e.next=5,a.text();case 5:return r=e.sent,e.next=8,Ut(t,r);case 8:return s=e.sent,e.abrupt("return",JSON.parse(s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,Dt(t);case 3:return r=e.sent,n.forEach((function(e,n){-1===R.indexOf(e.path)&&(r&&r.indexOf(e.path)>-1&&r.splice(r.indexOf(e.path),1),a.push(Ht(t,e.path,JSON.parse(e.contentStr))))})),r.forEach((function(e){-1===R.indexOf(e)&&a.push(Wt(t,e))})),e.next=8,Promise.all(a);case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),En=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Dt(t).then((function(e){return e.forEach((function(e){return n.push(Wt(t,e))}))}));case 3:return e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),On=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,Rt(t,"skhub/key/publicKey.json",{decrypt:!1});case 4:if(null!=(n=e.sent)){e.next=9;break}return n=Object(L.getPublicKeyFromPrivate)(t.loadUserData().appPrivateKey),e.next=9,Ht(t,"skhub/key/publicKey.json",n,{encrypt:!1});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Cn=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",Rt(t,"skhub/shared/sharedWithUser.json "));case 4:e.prev=4,e.t0=e.catch(0);case 6:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),wn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht(t,"skhub/shared/sharedWithUser.json ",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jn=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,n,{isImport:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),An=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o,i,c,l,p,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],s=[],e.t0=a.sharedByUserObj,e.t0){e.next=7;break}return e.next=6,Ln(t);case 6:e.t0=e.sent;case 7:return o=e.t0,c=(i=o||{}).senderToSpacesMap,l=void 0===c?{}:c,p=i.sharedByUserList,u=void 0===p?[]:p,n&&n.forEach(function(){var e=Object(O.a)(E.a.mark((function e(n){var a,o,i,c,p,d,f;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=jr(t),e.t0=i,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,9);break;case 4:return p=Dn(t,n,null===t||void 0===t||null===(a=t.profile)||void 0===a?void 0:a.appPublicKey),e.abrupt("break",12);case 6:return c=It(t.skydbseed).publicKey,p=Dn(t,n,c),e.abrupt("break",12);case 9:d=null===(o=JSON.parse(localStorage.getItem("blockstack-session")).userData)||void 0===o?void 0:o.profile,c=Mn(d).storageId,p=Object(L.lookupProfile)(n,I).then((function(e){var n=Mn(e).storage;return Dn(t,n,c)}));case 12:f=p.then((function(e){l[n]=e,-1===u.indexOf(n)&&u.push(n)})).catch((function(e){console.log(e),s.push(n)})),r.push(f);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(r);case 12:if(e.t1=null===a||void 0===a?void 0:a.isImport,!e.t1){e.next=16;break}return e.next=16,Ht(t,"skhub/shared/sharedByUser.json",{sharedByUserList:u,senderToSpacesMap:l});case 16:return e.abrupt("return",{sharedByUserList:u,senderToSpacesMap:l});case 17:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),xn=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o,i,c,l,p,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t,n);case 2:return r=e.sent,s=r.senderStorage,o=r.loggedInUserStorageId,i="skhub/shared/"+o+"/"+_+a+".json",e.next=8,Tn(t,i,s);case 8:return c=e.sent,e.t0=JSON,e.next=12,Ut(t,JSON.stringify(c));case 12:return e.t1=e.sent,l=e.t0.parse.call(e.t0,e.t1),p=[],u=[],null===l||void 0===l?void 0:l.skhubIdList.map((function(e){var n="skhub/shared/"+o+"/"+D+e+".json";p.push(Tn(t,n,s).then((function(e){return Ut(t,JSON.stringify(e))})).then((function(e){u.push(JSON.parse(e))})))})),e.next=19,Promise.all(p);case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=jr(t),e.t0=r,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?8:(e.t0,12);break;case 4:return e.next=6,Kt(a,n);case 6:return s=e.sent,e.abrupt("break",15);case 8:return e.next=10,Kt(a,n);case 10:return s=e.sent,e.abrupt("break",15);case 12:return e.next=14,fetch("".concat(a).concat(n)).then((function(e){return e.json()}));case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),In=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r,s,o,i,c,l,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=jr(t),e.t0=s,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?8:(e.t0,12);break;case 4:return i=null===t||void 0===t||null===(a=t.profile)||void 0===a?void 0:a.appPublicKey,o=n,c=n,e.abrupt("break",19);case 8:return i=It(t.skydbseed).publicKey,o=n,c=n,e.abrupt("break",19);case 12:return l=null===(r=JSON.parse(localStorage.getItem("blockstack-session")).userData)||void 0===r?void 0:r.profile,i=Mn(l).storageId,e.next=16,Object(L.lookupProfile)(n,I);case 16:p=e.sent,o=Mn(p).storage,c=Mn(p).storageId;case 19:return e.abrupt("return",{loggedInUserStorageId:i,senderStorage:o,remoteUserStorage:c,sessionType:s});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pn=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,Ln(t);case 3:return a=e.sent,n.sharedByUserObj=a,e.abrupt("return",An(t,null===a||void 0===a?void 0:a.sharedByUserList,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(t,"skhub/shared/sharedByUser.json");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dn=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="skhub/shared/"+a+"/"+M,e.next=3,Tn(t,r,n);case 3:return s=e.sent,e.next=6,Ut(t,JSON.stringify(s));case 6:return o=e.sent,e.abrupt("return",JSON.parse(o));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Nn=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a){var r,s,o,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t,n);case 2:return r=e.sent,s=r.senderStorage,o=r.loggedInUserStorageId,i=[],c=[],a.forEach((function(e){var n="skhub/shared/"+o+"/"+D+e+".json";c.push(Tn(t,n,s).then((function(e){return Ut(t,JSON.stringify(e))})).then((function(e){i.push(JSON.parse(e))})))})),e.next=10,Promise.all(c);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),_n=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r){var s,o,i,c,l,p,u,d,f;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=W(),c="skhub/shared/"+n+"/",p=jr(t),e.t0=p,e.next="SKYID"===e.t0?6:"SKYDB_ID"===e.t0?8:(e.t0,10);break;case 6:case 8:return l=n,e.abrupt("break",14);case 10:return e.next=12,Object(L.lookupProfile)(r[n].userid,I);case 12:u=e.sent,l=null===u||void 0===u||null===(s=u.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey;case 14:return i.skhubIdList=a,e.next=17,_t(t,JSON.stringify(i),{publicKey:l});case 17:return d=e.sent,f=c+N,e.next=21,Bt(t,f,d);case 21:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Mn=function(e){var t,n,a,r,s,o,i,c,l=null===e||void 0===e||null===(t=e.appsMeta)||void 0===t||null===(n=t[document.location.origin])||void 0===n||null===(a=n.storage)||void 0===a||null===(r=a.replace("https://gaia.blockstack.org/hub",""))||void 0===r?void 0:r.replace("/",""),p=null===l||void 0===l?void 0:l.replace("/","");return{key:null===e||void 0===e||null===(s=e.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey,storage:null===e||void 0===e||null===(i=e.appsMeta)||void 0===i||null===(c=i[document.location.origin])||void 0===c?void 0:c.storage,storageId:p}},Un=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r){var s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],null===n||void 0===n?void 0:n.map((function(e){s.push(In(t,r[e].userid).then((function(e){return e.remoteUserStorage})).then((function(e){return Wt(t,"skhub/shared/"+e+"/"+_+a+".json")})).then((function(){return Fn(t,r[e].spaces,r[n].userid)}),r))})),e.next=4,Promise.all(s);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Fn=function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r){var s,o,i,c,l,p,u,d,f,h,m,y,k,S,b,v,O,C,w,j,A,x;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m=jr(t),e.t0=m,e.next="SKYID"===e.t0?4:"SKYDB_ID"===e.t0?6:(e.t0,8);break;case 4:case 6:return h=a,e.abrupt("break",17);case 8:return e.next=10,Object(L.lookupProfile)(a,I);case 10:if(y=e.sent,h=null===y||void 0===y||null===(s=y.appsMeta)||void 0===s||null===(o=s[document.location.origin])||void 0===o?void 0:o.publicKey,k=null===y||void 0===y||null===(i=y.appsMeta)||void 0===i||null===(c=i[document.location.origin])||void 0===c||null===(l=c.storage)||void 0===l||null===(p=l.replace("https://gaia.blockstack.org/hub",""))||void 0===p?void 0:p.replace("/",""),a=null===k||void 0===k?void 0:k.replace("/",""),null!=h&&null!=a){e.next=17;break}throw console.log("User not setup for skyspace"),"User not setup for skyspace";case 17:if(null!=r){e.next=24;break}return e.next=20,Cn(t);case 20:if(e.t1=e.sent,e.t1){e.next=23;break}e.t1={};case 23:r=e.t1;case 24:return r[a]=null!==(u=r[a])&&void 0!==u?u:{},r[a].userid=a,r[a].spaces=null!==(d=r[a].spaces)&&void 0!==d?d:[],r[a].skylinks=null!==(f=r[a].skylinks)&&void 0!==f?f:[],S="skhub/shared/"+a+"/",r[a].spaces=Object(g.a)(new Set([].concat(Object(g.a)(r[a].spaces),Object(g.a)(n)))),(b=J()).skyspaceList=r[a].spaces,e.next=34,_t(t,JSON.stringify(b),{publicKey:h});case 34:return v=e.sent,O=S+M,e.next=38,Bt(t,O,v);case 38:return C=[],w=[],n.map((function(e){var n=S+_+e+".json";C.push(on(t,e).then((function(e){return w.push.apply(w,Object(g.a)(e.skhubIdList)),_t(t,JSON.stringify(e),{publicKey:h})})).then((function(e){return Bt(t,n,e)})))})),e.next=43,Promise.all(C);case 43:return r[a].skylinks=Object(g.a)(new Set([].concat(Object(g.a)(r[a].skylinks),w))),(j=W()).skhubIdList=r[a].skylinks,e.next=48,_t(t,JSON.stringify(j),{publicKey:h});case 48:return A=e.sent,x=S+N,e.next=52,Bt(t,x,A);case 52:return C.length=0,Object(g.a)(new Set([].concat(w))).map((function(e){var n=S+D+e+".json";C.push(Zt(t,e).then((function(e){return _t(t,JSON.stringify(e),{publicKey:h})})).then((function(e){return Bt(t,n,e)})))})),e.next=56,Promise.all(C);case 56:return e.next=58,wn(t,r);case 58:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Kn=n(767),Rn=function(e){return console.log("info modal action : ",e),{type:"CHANGE_INFO_MODAL_STATE",payload:e}},Hn=function(e){return{type:"SET_APP_SKYSPACES",payload:e}},Bn=function(e){return ha.dispatch(Ye(!0)),{type:"FETCH_APP_DETAIL",payload:e}},Yn=function(e){return ha.dispatch(Ye(!0)),{type:"FETCH_SKYSPACE_APP_DETAIL",payload:e}},Wn=function(){return{type:"FETCH_BLANK_APP"}},Jn=function(e){return ha.dispatch(Ye(!1)),null!=e.param&&ha.dispatch(function(e){return ha.dispatch(Ye(!0)),console.log(e),{type:"FETCH_APP_SKYSPACES",payload:e}}(e.param)),{type:"FETCH_APP_DETAIL_SUCCESS",payload:e.res}},Gn=function(e){return{type:"FETCH_APP_DETAIL_SUCCESS",payload:e}},zn=function(e){return ha.dispatch(Ye(!0)),console.log("create skapp action called"),{type:"CREATE_SKAPP",payload:e}},Vn=function(e){return{type:"CREATE_APP_SUCCESS",payload:e}},Zn=function(e){return null==e?T.removeItem("USER_SETTING"):T.setItem("USER_SETTING",JSON.stringify(e)),{type:"SET_USER_SETTING",payload:e}},Qn=function(e){return null==e&&(e=ha.getState().userSession),{type:"ACT_TY_FETCH_SKYSPACE_DETAIL",payload:e}},qn=function(e){var t;return null==e?T.removeItem("SKYSPACELIST"):T.setItem("SKYSPACELIST",JSON.stringify(e)),ha.dispatch({type:"FETCH_USER_SETTING",payload:t=null!=(t=null)?t:ha.getState().userSession}),ha.dispatch(ya()),{type:"SET_SKYSPACE_LIST",payload:e}},Xn=function(e){return null==e&&(e=ha.getState().userSession),{type:"FETCH_SKYSPACE_LIST",payload:e}},$n=function(e){return null==e?T.removeItem("USER"):T.setItem("USER",JSON.stringify(e)),{type:"SET_BLOCKSTACK_USER",payload:e}},ea=function(e){return ha.dispatch(Xn(null)),$n(e)},ta=function(e){return{type:"FETCH_BLOCKSTACK_USER",payload:e}},na=function(e){return T.clear(),ha.dispatch(qn(null)),"SKYID"===(null===e||void 0===e?void 0:e.idp)?($n(null),e.skyid.sessionDestroy(window.location.origin)):e.skydbseed?(window.location.href=window.location.origin,$n(null)):{type:"LOGOUT_BLOCKSTACK_USER",payload:e}},aa=function(e){return ha.dispatch(Ye(!0)),{type:"FETCH_HISTORY",payload:e}},ra=function(e){return null==e?T.removeItem("PORTALS_LIST"):T.setItem("PORTALS_LIST",JSON.stringify(e)),{type:"SET_PORTALS_LIST",payload:e}},sa=function(e){return{type:"FETCH_PORTALS_LIST",payload:e=null!=e?e:ha.getState().userSession}},oa={audioList:[],currentAudio:null,playing:!1},ia=n(779),ca=n(38),la=n(114).createEpicMiddleware,pa=Object(Xe.combineReducers)({snLoader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOADER_STATE":return t.payload;default:return e}},snShowMobileMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MOBILE_MENU_STATE":return t.payload;default:return e}},snShowDesktopMenu:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DESKTOP_MENU_STATE":return t.payload;default:return e}},snApps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_APPS":return e;case"FETCH_APPS_SUCCESS":case"ACT_TY_SET_APPS":case"FETCH_SKYSPACE_APPS_SUCCESS":case"STATIC_USERS":return t.payload;default:return e}},snAppDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BLANK_APP":return $e();case"FETCH_APP_DETAIL":return e;case"FETCH_APP_DETAIL_SUCCESS":case"CREATE_APP_SUCCESS":console.log(t);var n={version:"v1",createTS:new Date,lastUpdateTS:new Date,skhubId:t.payload.skhubId,skylink:t.payload.skylink,fileKey:t.payload.fileKey,id:t.payload.id,name:t.payload.name,title:t.payload.title,filename:t.payload.filename,description:t.payload.description,type:t.payload.type,contentLength:t.payload.contentLength,contentType:t.payload.contentType,httpMetadata:t.payload.httpMetadata,thumbnail:t.payload.thumbnail,redirect:t.payload.redirect,defaultPath:t.payload.defaultPath,linkType:t.payload.linkType,category:null!=t.payload.category?Number(t.payload.category):2,skyspaceList:null==t.payload.skyspaceList?[]:t.payload.skyspaceList,tags:j(t.payload.tags),userId:t.payload.userId,permission:"true"===t.payload.permission||!0===t.payload.permission,fileformat:t.payload.fileformat,git_url:t.payload.git_url,bookmark:"true"===t.payload.bookmark,skyAppSecret:t.payload.skyAppSecret,auth_code:t.payload.auth_code};return n;default:return e}},snInfoModalState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_INFO_MODAL_STATE":return console.log("changing info modal state"),t.payload;default:return e}},userSession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_SESSION":return t.payload;default:return e}},person:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOCKSTACK_USER":return t.payload;default:return null==e&&null!=(e=T.getItem("USER"))&&(e=JSON.parse(e)),e}},snSkyspaceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SKYSPACE_LIST":return t.payload;default:return null==e&&null!=(e=T.getItem("SKYSPACELIST"))&&(e=JSON.parse(e)),e}},snPortalsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PORTALS_LIST":return t.payload;default:return null==e&&null!=(e=T.getItem("PORTALS_LIST"))&&(e=JSON.parse(e)),e}},snAppSkyspaceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP_SKYSPACES":case"FETCH_APP_SKYSPACES_SUCCESS":return t.payload;default:return e}},snHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HISTORY":return t.payload;default:return e}},snTriggerSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRIGGER_SIGN_IN":return t.payload;default:return e}},snUserSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_SETTING":return t.payload;default:return null==e&&null!=(e=T.getItem("USER_SETTING"))&&(e=JSON.parse(e)),e}},snSkyspaceAppCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SKYSPACE_APP_COUNT":return t.payload;default:return null==e&&null!=(e=T.getItem("SKYSPACE_APP_COUNT"))&&(e=JSON.parse(e)),e}},snTopbarDisplay:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TOPBAR_STATE":return t.payload;default:return e}},snSkyspaceDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_SKYSPACE_DETAIL":return t.payload;default:return null==e&&null!=(e=T.getItem("STORAGE_SKYSPACE_DETAIL_KEY"))&&(e=JSON.parse(e)),e}},snPublicHash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_PUBLIC_HASH":return t.payload;default:return e}},snPublicInMemory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addedSkapps:[],deletedSkapps:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_PUBLIC_IN_MEMORY":return t.payload;default:return e}},snUploadList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACT_TY_SET_UPLOAD_LIST":return t.payload;default:return e}},SnAudioPlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO_LIST":return Object(b.a)(Object(b.a)({},e),{},{audioList:Object(g.a)(t.payload),currentAudio:t.payload[0]?t.payload[0]:null});case"ADD_ITEM_IN_AUDIO_LIST":return Object(b.a)(Object(b.a)({},e),{},{audioList:[].concat(Object(g.a)(e.audioList),[t.payload])});case"CHANGE_AUDIO_STATUS":return Object(b.a)(Object(b.a)({},e),{},{playing:t.payload});case"UPDATE_CURRENT_AUDIO":return Object(b.a)(Object(b.a)({},e),{},{currentAudio:t.payload});case"RESET_AUDIO_PLAYER":return Object(b.a)({},oa);default:return e}},snImportedSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMPORTED_SPACE":return t.payload;default:return e}}}),ua=Object(Kn.a)((function(e){return e.pipe(Object(rt.a)("FETCH_APPS"),Object(ot.a)((function(e){return(t=e.payload,ct.a.getJSON(lt+"?limit=100&category="+t)).pipe(Object(it.a)((function(e){return e.hasOwnProperty("status")?e.result:e})),Object(it.a)((function(e){return dt(e.rows)})));var t})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_APP_DETAIL"),Object(ot.a)((function(e){return console.log("need not call ",e),(t=e.payload.skyAppId,ct.a.getJSON(lt+t)).pipe(Object(it.a)((function(e){return e.hasOwnProperty("status")?e.result:e})),Object(it.a)((function(t){return Yn({skyAppId:t.skhubId,session:e.payload.session})})));var t})))}),(function(e){return e.pipe(Object(rt.a)("CREATE_SKAPP"),Object(ot.a)((function(e){return console.log("create skapp switchmap ",e),(t=e.payload,Object(ct.a)({url:lt,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).pipe(Object(it.a)((function(e){console.log(e);var t=e.response;return t.hasOwnProperty("status")?t.result:t})),Object(it.a)((function(e){return t=e,ha.dispatch(Ye(!1)),ha.dispatch(Rn(!0)),{type:"CREATE_APP_SUCCESS",payload:t};var t})));var t})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_SKYSPACE_APPS"),Object(ot.a)((function(e){return Object(st.a)(sn(e.payload.session,e.payload.skyspace)).pipe(Object(it.a)((function(e){return console.log("response in skyspaceAppsepic",e),null==e?e=[]:e.sort(),t=e,ha.dispatch(Ye(!1)),{type:"FETCH_SKYSPACE_APPS_SUCCESS",payload:t};var t})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_BLOCKSTACK_USER"),Object(ot.a)((function(e){return Object(st.a)(e.payload.handlePendingSignIn()).pipe(Object(it.a)((function(t){return On(e.payload),Xn(e.payload),ea(t)})))})))}),(function(e){return e.pipe(Object(rt.a)("LOGOUT_BLOCKSTACK_USER"),Object(ot.a)((function(e){return Object(st.a)(e.payload.signUserOut(window.location.origin)).pipe(Object(it.a)((function(e){return $n(null)})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_SKYSPACE_LIST"),Object(ot.a)((function(e){return Ye(!0),Object(st.a)(en(e.payload)).pipe(Object(it.a)((function(e){return Ye(!1),qn(e)})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_SKYSPACE_APP_DETAIL"),Object(ot.a)((function(e){return Object(st.a)(Zt(e.payload.session,e.payload.skyAppId)).pipe(Object(it.a)((function(t){return Jn({res:t,param:e.payload})})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_APP_SKYSPACES","FETCH_APP_SKYSPACES_AND_SKYSPACE_APP"),Object(ot.a)((function(e){return console.log("in appskyspacelist epic to call",e),Object(st.a)(rn(e.payload.session,e.payload.skyAppId)).pipe(Object(it.a)((function(t){return"FETCH_APP_SKYSPACES"===e.type?(n=t,ha.dispatch(Ye(!1)),console.log("in fetchAppSkyspacesSuccess action",n),{type:"FETCH_APP_SKYSPACES_SUCCESS",payload:n}):"FETCH_APP_SKYSPACES_AND_SKYSPACE_APP"===e.type?function(e,t){return ha.dispatch(Ye(!1)),ha.dispatch(Yn({skyAppId:t.skyAppId,session:t.session})),{type:"FETCH_APP_SKYSPACES_SUCCESS",payload:e}}(t,e.payload):void 0;var n})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_HISTORY"),Object(ot.a)((function(e){return Object(st.a)(pn(e.payload)).pipe(Object(it.a)((function(e){return t=e.sort((function(e,t){return new Date(t.lastUpdateTS)-new Date(e.lastUpdateTS)})),ha.dispatch(Ye(!1)),{type:"SET_HISTORY",payload:t};var t})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_PORTALS_LIST"),Object(ot.a)((function(e){return Ye(!0),Object(st.a)(kn(e.payload)).pipe(Object(it.a)((function(e){return Ye(!1),ra(e)})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_USER_SETTING"),Object(ot.a)((function(e){return console.log("user setting epic",e),Ye(!0),Object(st.a)(hn(e.payload)).pipe(Object(it.a)((function(e){return console.log(e),Ye(!1),Zn(e)})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_ALL_SKYLINKS"),Object(ot.a)((function(e){return Object(st.a)(function(e){var t=[];return Rt(e,N).then((function(n){if(n&&n.skhubIdList&&n.skhubIdList.length>0){var a=[];return n.skhubIdList.forEach((function(n){a.push(Zt(e,n).then((function(e){t.push(e)})))})),Promise.all(a).then((function(){return t}))}return[]})).catch((function(e){return[]}))}(e.payload)).pipe(Object(it.a)((function(e){return dt(e)})))})))}),(function(e){return e.pipe(Object(rt.a)("FETCH_SKYSPACE_APP_COUNT"),Object(ot.a)((function(e){return Object(st.a)(function(e){var t={};return en(e).then((function(n){var a=[];return n.forEach((function(n){a.push(on(e,n).then((function(e){null!=e&&null!=e.skhubIdList&&(t[n]=e.skhubIdList.length)})))})),Promise.all(a).then((function(){return t}))}))}(e.payload)).pipe(Object(it.a)((function(e){return ma(e)})))})))}),(function(e){return e.pipe(Object(rt.a)("ACT_TY_FETCH_SKYSPACE_DETAIL"),Object(ot.a)((function(e){return Object(st.a)(tn(e.payload)).pipe(Object(it.a)((function(e){return null==(t=e)?T.removeItem("STORAGE_SKYSPACE_DETAIL_KEY"):T.setItem("STORAGE_SKYSPACE_DETAIL_KEY",JSON.stringify(t)),{type:"ACT_TY_SET_SKYSPACE_DETAIL",payload:t};var t})))})))}),(function(e){return e.pipe(Object(rt.a)("ACT_TY_FETCH_PUBLIC_APPS"),Object(ot.a)((function(e){return wt(e.payload).then((function(e){return dt(e.data)}))})))})),da=la(),fa=Object(Xe.createStore)(pa,Object(ia.composeWithDevTools)(ca.applyMiddleware(da)));da.run(ua);var ha=fa,ma=function(e){return null==e?T.removeItem("SKYSPACE_APP_COUNT"):T.setItem("SKYSPACE_APP_COUNT",JSON.stringify(e)),{type:"SET_SKYSPACE_APP_COUNT",payload:e}},ya=function(e){return null==e&&(e=ha.getState().userSession),{type:"FETCH_SKYSPACE_APP_COUNT",payload:e}},ka=n(1301),Sa=n(1303),ba=n(1304),ga=n(68),va=n.n(ga),Ea=n(1293),Oa=n(1296),Ca=n(1295),wa=n(1297),ja=n(1294),Aa=n(701),xa=n(702),Ta=n(1268),Ia=n(393),Pa=n.n(Ia),La=n(782),Da=n.n(La),Na=n(781),_a=n.n(Na),Ma=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).modifySelected=function(e){var t=a.state.selectedItems,n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),a.setState({selectedItems:t}),a.props.onUpdate&&a.props.onUpdate(a.state.selectedItems)},a.state={items:Object.keys(a.props.itemsObj),hasOverflow:!1,canScrollLeft:!1,selectedItems:a.props.selectedItems,canScrollRight:!1},a.checkForOverflow=a.checkForOverflow.bind(Object(C.a)(a)),a.checkForScrollPosition=a.checkForScrollPosition.bind(Object(C.a)(a)),a.debounceCheckForOverflow=Pa()(a.checkForOverflow,1e3),a.debounceCheckForScrollPosition=Pa()(a.checkForScrollPosition,200),a.container=null,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.checkForOverflow(),this.checkForScrollPosition(),this.container.addEventListener("scroll",this.debounceCheckForScrollPosition)}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener("scroll",this.debounceCheckForScrollPosition),this.debounceCheckForOverflow.cancel()}},{key:"componentDidUpdate",value:function(e,t){t.items.length!==this.state.items.length&&(this.checkForOverflow(),this.checkForScrollPosition()),this.state.selectedItems!==this.props.selectedItems&&this.setState({selectedItems:this.props.selectedItems}),JSON.stringify(this.state.items.sort())!==JSON.stringify(Object.keys(this.props.itemsObj).sort())&&this.setState({items:Object.keys(this.props.itemsObj)})}},{key:"checkForScrollPosition",value:function(){var e=this.container,t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;this.setState({canScrollLeft:t>0,canScrollRight:t!==n-a})}},{key:"checkForOverflow",value:function(){var e=this.container,t=e.scrollWidth>e.clientWidth;this.setState({hasOverflow:t})}},{key:"scrollContainerBy",value:function(e){this.container.scrollBy({left:e,behavior:"smooth"})}},{key:"buildItems",value:function(){var e=this;return this.state.items.map((function(t){return r.a.createElement("li",{className:"item ".concat(e.state.selectedItems.indexOf(t)>-1?"active":""),key:t},e.props.itemsObj[t]&&r.a.createElement(Ue.a,{arrow:!0,title:e.props.itemsObj[t][e.props.labelKey]&&e.props.itemsObj[t][e.props.labelKey].length>(e.props.showTooltipFrom?e.props.showTooltipFrom:10)?e.props.itemsObj[t][e.props.labelKey]:""},r.a.createElement(Le.a,{className:"cursor-pointer",label:e.props.itemsObj[t][e.props.labelKey],onClick:function(){return e.modifySelected(t)}})))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.canScrollLeft,a=t.canScrollRight,s=this.props.type;return null==s?r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"},ref:function(t){e.container=t}},this.state.items.map((function(t){return r.a.createElement("div",{key:t},e.props.itemsObj[t]&&r.a.createElement(Ue.a,{arrow:!0,title:e.props.itemsObj[t][e.props.labelKey]&&e.props.itemsObj[t][e.props.labelKey].length>(e.props.showTooltipFrom?e.props.showTooltipFrom:10)?e.props.itemsObj[t][e.props.labelKey]:""},r.a.createElement(Le.a,{icon:void 0,label:e.props.itemsObj[t][e.props.labelKey],onClick:function(){return e.modifySelected(t)},className:"item ".concat(e.state.selectedItems.indexOf(t)>-1?"active":""),size:"small"})))}))):"ADVANCE"===s?r.a.createElement("div",{className:"carousal-menu-root"},n&&r.a.createElement(Ue.a,{title:"Delete",arrow:!0},r.a.createElement(Me.a,{onClick:function(){e.scrollContainerBy(-200)}},r.a.createElement(_a.a,null))),r.a.createElement("ul",{className:"item-container",ref:function(t){e.container=t}},this.buildItems()),a&&r.a.createElement(Ue.a,{title:"Delete",arrow:!0},r.a.createElement(Me.a,{onClick:function(){e.scrollContainerBy(200)}},r.a.createElement(Da.a,null)))):void 0}}]),n}(a.PureComponent),Ua=n(402),Fa=function(e){return{type:"CHANGE_MOBILE_MENU_STATE",payload:e}},Ka=function(){return Fa(!ha.getState().snShowMobileMenu)};var Ra=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({skyspaceName:e.target.value})},a.createSkyspace=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,Xt(a.props.userSession,a.state.skyspaceName);case 3:a.props.setLoaderDisplay(!1),a.props.fetchSkyspaceList(),a.closeModal();case 6:case"end":return e.stop()}}),e)}))),a.renameSkyspace=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Will create skyspace"),a.props.setLoaderDisplay(!0),e.next=4,$t(a.props.userSession,a.props.skyspaceName,a.state.skyspaceName);case 4:a.props.fetchSkyspaceDetail(),a.props.fetchSkyspaceList(),a.props.setLoaderDisplay(!1),a.closeModal();case 8:case"end":return e.stop()}}),e)}))),a.closeModal=function(){a.setState({skyspaceName:null}),a.props.handleClose()},a.handleSubmit=function(){switch(a.props.type){case"ADD_SKYSPACE":a.createSkyspace();break;case"RENAME_SKYSPACE":a.renameSkyspace();break;default:a.closeModal()}},a.state={skyspaceName:null},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){"RENAME_SKYSPACE"===this.props.type&&null==this.state.skyspaceName?this.setState({skyspaceName:this.props.skyspaceName}):""===this.props.type&&null!=this.state.skyspaceName&&this.setState({skyspaceName:null})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ea.a,{open:this.props.open,onClose:this.closeModal,"aria-labelledby":"form-dialog-title"},r.a.createElement(ja.a,{id:"form-dialog-title"},null!=this.props.title&&""!==this.props.title.trim()?this.props.title:"Add New Skyspace"),r.a.createElement(Ca.a,null,r.a.createElement(Ua.ValidatorForm,{onSubmit:this.handleSubmit},r.a.createElement(Aa.a,{autoFocus:!0,margin:"dense",id:"name",label:"Enter Skyspace Name",fullWidth:!0,value:this.state.skyspaceName,onChange:this.handleChange}))),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:this.closeModal,color:"primary",className:"btn-bg-color",variant:"contained"},"Cancel"),r.a.createElement(xa.a,{onClick:this.handleSubmit,color:"primary",className:"btn-bg-color",variant:"contained"},"ADD_SKYSPACE"===this.props.type?"Create":"Rename"))))}}]),n}(r.a.Component),Ha=Object(f.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,person:e.person,skyspaceList:e.snSkyspaceList}}),(function(e){return Object(Xe.bindActionCreators)({setMobileMenuDisplay:Fa,toggleMobileMenuDisplay:Ka,fetchBlockstackPerson:ta,setLoaderDisplay:Ye,logoutPerson:na,setSkyspaceList:qn,fetchSkyspaceList:Xn,fetchSkyspaceDetail:Qn},e)}))(Ra),Ba=n(1322),Ya=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Object.assign({direction:"up",ref:t},e))})),Wa=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).resetOnClose=function(){a.setState({selectedSkyspaces:[]}),a.props.onClose()},a.save=function(){var e=JSON.parse(JSON.stringify(a.state.selectedSkyspaces));a.setState({selectedSkyspaces:[]}),a.props.onSave(e)},a.addSkyspace=function(){a.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),a.handleAddSpaceOpen()},a.handleAddSpaceOpen=function(){a.setState({showAddSkyspace:!0})},a.handleAddSpaceClose=function(){a.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},a.state={selectedSkyspaces:[],skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"},showAddSkyspace:!1},a}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{open:this.props.open,onClose:this.resetOnClose,TransitionComponent:Ya,keepMounted:!0,disableBackdropClick:null!==(e=this.props.disableBackdropClick)&&void 0!==e&&e,disableEscapeKeyDown:null!==(t=this.props.disableEscapeKeyDown)&&void 0!==t&&t,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ja.a,{id:"alert-dialog-title"},this.props.title||"Add this Skylink to Skyspaces"),r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},!this.props.showAddSkyspace&&r.a.createElement(Ma,{selectedItems:this.state.selectedSkyspaces,itemsObj:A(null!=this.props.availableSkyspaces?this.props.availableSkyspaces:[]),labelKey:"label",onUpdate:function(e){console.log(n.state.selectedSkyspaces),n.setState({selectedSkyspaces:e})}}),this.props.showAddSkyspace&&r.a.createElement(Ba.a,{multiple:!0,id:"tags-filled",filterSelectedOptions:!0,options:this.props.availableSkyspaces||[],freeSolo:!0,onChange:function(e,t,a){return n.setState({selectedSkyspaces:t})},renderTags:function(e,t){return e.map((function(e,n){return r.a.createElement(Le.a,Object.assign({variant:"outlined",label:e},t({index:n})))}))},renderInput:function(e){return r.a.createElement(Aa.a,Object.assign({},e,{variant:"standard",label:"Select from Existing Skyspace or Add a New Skyspace",placeholder:"Select from Existing Skyspace or Add a New Skyspace"}))}}))),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:this.resetOnClose,autoFocus:!0,variant:"contained",color:"primary",className:"btn-20px app-bg-color"},"Cancel"),r.a.createElement(xa.a,{onClick:this.save,autoFocus:!0,variant:"contained",color:"primary",className:"btn-20px app-bg-color"},"Save"))),this.props.showAddSkyspace&&r.a.createElement(Ha,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleAddSpaceOpen,handleClose:this.handleAddSpaceClose,type:this.state.skyspaceModal.type}))}}]),n}(r.a.Component),Ja=n(102),Ga=n(258),za=Object(Be.a)((function(e){return{root:{maxWidth:345},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ga.a[500]},cardHeader:{paddingTop:5,paddingBottom:5}}}));function Va(e){var t=za(),n=Object(f.c)(),s=Object(a.useState)(0),o=Object(Z.a)(s,2),i=o[0],c=o[1],l=Object(a.useState)(!1),p=Object(Z.a)(l,2),u=p[0],d=p[1],h=Object(a.useState)(!1),m=Object(Z.a)(h,2),y=m[0],k=m[1],S=Object(a.useState)([]),b=Object(Z.a)(S,2),g=b[0],v=b[1],E=Object(a.useState)(),O=Object(Z.a)(E,2),C=O[0],j=O[1],A=Object(a.useRef)(null),x=Object(f.d)((function(e){return e.userSession})),T=Object(f.d)((function(e){return e.snSkyspaceList})),I=function(e){n(Ye(!0)),un(x,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){n(Ye(!1)),br(e.skylink,x)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(w.a,{container:!0,spacing:1},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement("div",{className:Object(Te.default)({"d-none":!u})},r.a.createElement(Ze.a,{ref:A,items:function(){var t=[];return e.filteredApps.map((function(e){t.push({thumbnail:Sr(e.thumbnail),original:Sr(e.skylink)})})),t}(),startIndex:i,onScreenChange:function(e){return!e&&d(!1)}}))),e.filteredApps&&e.filteredApps.slice((e.page-1)*e.itemsPerPage,(e.page-1)*e.itemsPerPage+e.itemsPerPage).map((function(a,s){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,sm:4,xs:12,key:s},r.a.createElement(Qe.a,{className:t.root},r.a.createElement(ka.a,{className:t.cardHeader,title:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(qe.a,{variant:"inherit",className:"font-weight-bold cursor-pointer h5",color:"black",onClick:function(){I(a)}},va()(a.name,25)),e.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(ze.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Je.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}}))))}),r.a.createElement(Sa.a,{component:"img",onLoad:function(){return console.log("image loaded")},height:"100",className:(t.media,"cursor-pointer card-media"),src:Sr(a.thumbnail),onClick:function(){return t=s,d(!0),c(t+9*(e.page-1)),void A.current.fullScreen();var t},title:a.name}),r.a.createElement(ba.a,{style:{paddingBottom:0}},r.a.createElement(Ja.a,{variant:"body2",color:"textSecondary",component:"p"},va()(a.description,40))),r.a.createElement(xe.a,{disableSpacing:!0,className:"vertical-padding-0"},r.a.createElement(He,{app:a,hash:e.hash,source:"img",hideTags:!0,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return function(e){var t=e.skhubId;rn(x,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,T.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),j(e),k(!0),v(t)):console.log("NO new skyspace available")}))}(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return function(t){var a=t.skhubId;n(Ye(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?ln(x,e.skyspace,a).then((function(t){n(ya()),n(Ye(!1)),e.onDelete()})):nn(x,a,t.skyspaceList).then((function(t){n(Ye(!1)),e.onDelete()}))}(a)},onDownload:function(){return I(a)}})))))})))),r.a.createElement(Wa,{userSession:x,open:y,availableSkyspaces:g,onClose:function(){return k(!1)},onSave:function(e){var t=C;null!=e&&0!==e.lenghth&&(n(Ye(!0)),an(x,t.skhubId,e).then((function(){n(Ye(!1)),k(!1),j(),n(ya())})))}}))}function Za(e){var t=Va;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId})}var Qa=n(785),qa=n.n(Qa),Xa=function(){return{type:"CHANGE_TOPBAR_STATE",payload:!ha.getState().snTopbarDisplay}},$a=function(e){return{type:"CHANGE_DESKTOP_MENU_STATE",payload:e}},er=function(){return $a(!ha.getState().snShowDesktopMenu)},tr=Object(Be.a)((function(e){return{root:{maxWidth:345},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ga.a[500]},cardHeader:{paddingTop:5,paddingBottom:5}}}));function nr(e){var t=tr(),n=Object(f.c)(),s=Object(a.useState)(!1),o=Object(Z.a)(s,2),i=o[0],c=o[1],l=Object(a.useState)([]),p=Object(Z.a)(l,2),u=p[0],d=p[1],h=Object(a.useState)(),m=Object(Z.a)(h,2),y=m[0],k=m[1],S=Object(a.useState)(!1),b=Object(Z.a)(S,2),g=b[0],v=b[1],E=Object(a.useState)([]),O=Object(Z.a)(E,2),C=O[0],j=O[1],A=Object(f.d)((function(e){return e.userSession})),x=Object(f.d)((function(e){return e.snSkyspaceList})),T=function(e){n(Ye(!0)),un(A,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){n(Ye(!1)),br(e.skylink,A)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(w.a,{container:!0,spacing:1},e.filteredApps&&e.filteredApps.slice((e.page-1)*e.itemsPerPage,(e.page-1)*e.itemsPerPage+e.itemsPerPage).map((function(a,s){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,sm:4,xs:12,key:s},r.a.createElement(Qe.a,{className:t.root},r.a.createElement(ka.a,{className:t.cardHeader,title:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(qe.a,{variant:"inherit",className:"font-weight-bold cursor-pointer h5",color:"black",onClick:function(){T(a)}},va()(a.name,25)),e.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(ze.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Je.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}}))))}),r.a.createElement(Sa.a,{component:"img",onLoad:function(){return console.log("image loaded")},height:"100",className:(t.media,"cursor-pointer card-media"),src:Sr(a.thumbnail),onClick:function(){return function(e,t){n(er()),j([{url:Sr(e.skylink),type:"video",altTag:e.name}]),n(Xa()),v(!0)}(a)},title:a.name}),r.a.createElement(ba.a,{style:{paddingBottom:0}},r.a.createElement(Ja.a,{variant:"body2",color:"textSecondary",component:"p"},va()(a.description,40))),r.a.createElement(xe.a,{disableSpacing:!0,className:"vertical-padding-0"},r.a.createElement(He,{app:a,source:"img",hash:e.hash,hideTags:!0,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return function(e){var t=e.skhubId;rn(A,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,x.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),k(e),c(!0),d(t)):console.log("NO new skyspace available")}))}(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return function(t){var a=t.skhubId;n(Ye(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?ln(A,e.skyspace,a).then((function(t){n(ya()),n(Ye(!1)),e.onDelete()})):nn(A,a,t.skyspaceList).then((function(t){n(Ye(!1)),e.onDelete()}))}(a)},onDownload:function(){return T(a)}})))))})))),g&&r.a.createElement("div",{className:"lightbox-container"},r.a.createElement(qa.a,{id:"light-box",className:"light-box",data:C,startIndex:0,onCloseCallback:function(e){v(!1),j([]),n(er()),n(Xa())}})),r.a.createElement(Wa,{userSession:A,open:i,availableSkyspaces:u,onClose:function(){return c(!1)},onSave:function(e){var t=y;null!=e&&0!==e.lenghth&&(n(Ye(!0)),an(A,t.skhubId,e).then((function(){n(Ye(!1)),c(!1),k(),n(ya())})))}}))}function ar(e){var t=nr;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId})}var rr=function(e){return{type:"UPDATE_CURRENT_AUDIO",payload:e}},sr=function(e){return{type:"CHANGE_AUDIO_STATUS",payload:e}},or=n(787),ir=n.n(or),cr=n(786),lr=n.n(cr),pr=n(504),ur=Object(Be.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)},paddingBottom:10},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ga.a[500]},cardHeader:{paddingTop:5,paddingBottom:5},largeButton:{padding:24}}}));function dr(e){var t=ur(),n=Object(f.c)(),s=Object(a.useState)(!1),o=Object(Z.a)(s,2),i=o[0],c=o[1],l=Object(a.useState)([]),p=Object(Z.a)(l,2),u=p[0],d=p[1],h=Object(a.useState)(),m=Object(Z.a)(h,2),y=m[0],k=m[1],S=Object(f.d)((function(e){return e.userSession})),b=Object(f.d)((function(e){return e.snSkyspaceList})),g=Object(f.d)((function(e){return e.SnAudioPlayer.currentAudio})),v=function(e){n(Ye(!0)),un(S,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){n(Ye(!1)),br(e.skylink,S)}))};Object(a.useEffect)((function(){n({type:"SET_AUDIO_LIST",payload:e.filteredApps.map((function(e){return E(e)}))})}),[]);var E=function(e){return{name:e.name,src:Sr(e.skylink),id:e.skhubId,img:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjUgMjUiID48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEyIDNsLjAxIDEwLjU1Yy0uNTktLjM0LTEuMjctLjU1LTItLjU1QzcuNzkgMTMgNiAxNC43OSA2IDE3czEuNzkgNCA0LjAxIDRTMTQgMTkuMjEgMTQgMTdWN2g0VjNoLTZ6bS0xLjk5IDE2Yy0xLjEgMC0yLS45LTItMnMuOS0yIDItMiAyIC45IDIgMi0uOSAyLTIgMnoiLz48L2c+PC9zdmc+"}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(w.a,{container:!0,spacing:1},e.filteredApps&&e.filteredApps.map((function(a,s){var o=!(!g||g.id!==a.skhubId);return r.a.createElement(r.a.Fragment,{key:s},r.a.createElement(w.a,{item:!0,xs:12,key:s},r.a.createElement(Qe.a,{className:"".concat(t.root," ").concat(o?"audio_card active":"audio_card")},r.a.createElement(pr.a,{display:"flex",p:1,width:"100%"},r.a.createElement(pr.a,{margin:"auto"},r.a.createElement(lr.a,{style:{color:x,width:"40px",height:"40px"}})),r.a.createElement(pr.a,{flexGrow:1},r.a.createElement(ka.a,{className:t.cardHeader,title:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(qe.a,{variant:"inherit",className:"font-weight-bold cursor-pointer h5",color:"black",onClick:function(){v(a)}},va()(a.name,25)),e.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.arrSelectedAps.indexOf(a)&&r.a.createElement(ze.a,{className:"selection-radio",onClick:function(){return e.onSelection(a)}}),e.arrSelectedAps.indexOf(a)>-1&&r.a.createElement(Je.a,{className:"selection-radio",onClick:function(){return e.onSelection(a,!0)}}))))}),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(xe.a,{disableSpacing:!0,className:"vertical-padding-0"},r.a.createElement(He,{app:a,source:"img",hash:e.hash,hideTags:!0,hideDelete:null!=e.senderId,hideAdd:null!=e.senderId,onAdd:function(){return function(e){var t=e.skhubId;rn(S,t).then((function(e){return console.log("skyspacesForApp ",e),e=null==e?[]:e.skyspaceForSkhubIdList,b.filter((function(t){return!e.includes(t)}))})).then((function(t){console.log("availableSkyspaces",t),null!=t&&t.length>0?(console.log("will show add to skyspace modal"),k(e),c(!0),d(t)):console.log("NO new skyspace available")}))}(a)},onEdit:function(){return e.openSkyApp(a)},onDelete:function(){return function(t){var a=t.skhubId;n(Ye(!0)),"undefined"!=typeof e.skyspace&&e.skyspace?ln(S,e.skyspace,a).then((function(t){n(ya()),n(Ye(!1)),e.onDelete()})):nn(S,a,t.skyspaceList).then((function(t){n(Ye(!1)),e.onDelete()}))}(a)},onDownload:function(){return v(a)}})))),r.a.createElement(pr.a,{margin:"auto"},r.a.createElement(Ue.a,{title:"Play",arrow:!0},r.a.createElement(Me.a,{onClick:function(){!function(t){var a=e.filteredApps.filter((function(e){return t===e.skhubId}));a.length&&(n(rr(E(a[0]))),n(sr(!0)))}(a.skhubId)},style:{color:x}},r.a.createElement(ir.a,null))))))))})))),r.a.createElement(Wa,{userSession:S,open:i,availableSkyspaces:u,onClose:function(){return c(!1)},onSave:function(e){var t=y;null!=e&&0!==e.lenghth&&(n(Ye(!0)),an(S,t.skhubId,e).then((function(){n(Ye(!1)),c(!1),k(),n(ya())})))}}))}n(1117);function fr(e){var t=dr;return r.a.createElement(t,{filteredApps:e.filteredApps,page:e.page,skyspace:e.skyspace,itemsPerPage:e.itemsPerPage,openSkyApp:e.openSkyApp,onDelete:e.onDelete,onSelection:e.onSelection,isSelect:e.isSelect,arrSelectedAps:e.arrSelectedAps,hash:e.hash,senderId:e.senderId})}var hr={all:{getLogo:function(){return r.a.createElement(ue.a,null)},heading:"All"},video:{fileTypeList:["video/x-msvideo","video/mpeg","video/ogg","video/webm","video/3gpp","video/3gpp2","video/mp4"],getLogo:function(){return r.a.createElement(le.a,{icon:"video"})},heading:"Videos",cards:function(e,t,n,a,s,o,i,c,l,p,u){return r.a.createElement(ar,{filteredApps:t,page:e,skyspace:n,itemsPerPage:a,openSkyApp:s,onDelete:p,onSelection:o,isSelect:i,arrSelectedAps:c,hash:l,senderId:u})}},pictures:{fileTypeList:["image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/svg+xml","image/tiff"],getLogo:function(){return r.a.createElement(Oe.a,null)},heading:"Images",cards:function(e,t,n,a,s,o,i,c,l,p,u){return r.a.createElement(Za,{filteredApps:t,page:e,skyspace:n,itemsPerPage:a,openSkyApp:s,onDelete:p,onSelection:o,isSelect:i,arrSelectedAps:c,hash:l,senderId:u})}},audio:{fileTypeList:["audio/aac","audio/mpeg"],getLogo:function(){return r.a.createElement(le.a,{icon:"headphones"})},heading:"Audio",cards:function(e,t,n,a,s,o,i,c,l,p,u){return r.a.createElement(fr,{filteredApps:t,page:e,skyspace:n,itemsPerPage:a,openSkyApp:s,onDelete:p,onSelection:o,isSelect:i,arrSelectedAps:c,hash:l,senderId:u})}},documents:{fileTypeList:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/msword","text/html","text/plain","application/pdf"],getLogo:function(){return r.a.createElement(be.a,null)},heading:"Documents"},games:{getLogo:function(){return r.a.createElement(me.a,null)},heading:"Games"},blog:{getLogo:function(){return r.a.createElement(le.a,{icon:"blog"})},heading:"Blogs"},utilities:{getLogo:function(){return r.a.createElement(Ae.a,null)},heading:"Utilities"},software:{getLogo:function(){return r.a.createElement(fe.a,null)},heading:"Software"},livestream:{getLogo:function(){return r.a.createElement(ve.a,null)},heading:"LiveStream"},books:{getLogo:function(){return r.a.createElement(ke.a,null)},heading:"Books"},data:{getLogo:function(){return r.a.createElement(we.a,null)},heading:"Data"}},mr=function(){var e=JSON.parse(JSON.stringify(hr));return delete e.all,e},yr=function(){var e=JSON.parse(JSON.stringify(hr));delete e.all;var t=[];for(var n in e)if(e.hasOwnProperty(n)){var a={key:n,label:e[n].heading};t.push(a)}return t},kr=function(e){return null!=e&&null!=e.setting&&null!=e.setting.portal&&""!==e.setting.portal.trim()?e.setting.portal:P},Sr=function(e,t){var n="";return 0===e.indexOf("http://")||0===e.indexOf("https://")?n=e:0===e.indexOf("sia://")?n=e.replace("sia://",kr(t)):46===e.length&&(n=kr(t)+e),n},br=function(e,t){var n=Sr(e,t);""!==n&&window.open(n,"_blank")},gr=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,a=t.url,r=null,s=new Promise((function(e){r=e})),(o=document.createElement("video")).crossOrigin="anonymous",o.src=a||URL.createObjectURL(n),console.log("video.src",o.src),o.onloadeddata=r,o.load(),e.next=11,s;case 11:return e.next=13,vr(o);case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),a=t.videoWidth,r=t.videoHeight,n.width=a,n.height=r,n.getContext("2d").drawImage(t,0,0,a,r),e.next=9,re.a.canvasToFile(n,"image/jpeg");case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Er=function(e){if(null!=e&&!isNaN(e)){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}},Or=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.a)(t,{maxSizeMB:1,maxWidthOrHeight:256,useWebWorker:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cr=function(e,t){var n=mr(),a=Object.keys(n).find((function(t){return n[t].fileTypeList&&n[t].fileTypeList.indexOf(e)>-1}));a&&(t.type=a)},wr=function(e,t,n){return function(e,t){var n=[];return t.map((function(e){return n.push(e.skhubId)})),e.filter((function(e){return!n.includes(e.skhubId)}))}(Object(g.a)(new Set([].concat(Object(g.a)(t),Object(g.a)(e)))),n)},jr=function(e){var t="BLOCKSTACK_ID";return e.skydbseed?t="SKYDB_ID":e.skyid&&(t="SKYID"),t},Ar=(n(1118),n(1319)),xr=n(797),Tr=n.n(xr);n(1119);function Ir(e){return r.a.createElement("svg",Object.assign({viewBox:"0 0 36 40",width:"36",height:"40"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M35.5 16.207L19.793.5H2A1.5 1.5 0 00.5 2v36A1.5 1.5 0 002 39.5h32a1.5 1.5 0 001.5-1.5V16.207z",stroke:"#C5CEC7",fill:"#FFF"}),r.a.createElement("path",{d:"M20 1l15 15H22a2 2 0 01-2-2V1z",fill:"#C5CEC7"})))}function Pr(e){return r.a.createElement("svg",Object.assign({width:38,height:42,viewBox:"0 0 38 42"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M3 1h18l16 16v22a2 2 0 01-2 2H3a2 2 0 01-2-2V3a2 2 0 012-2zm12 24l3 3 5-5",stroke:"#57B560",strokeWidth:2,strokeLinejoin:"round"}),r.a.createElement("path",{d:"M21 2l15 15H23a2 2 0 01-2-2V2z",fill:"#57B560"})))}function Lr(e){return r.a.createElement("svg",Object.assign({width:38,height:42,viewBox:"0 0 38 42"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M3 1h18l16 16v22a2 2 0 01-2 2H3a2 2 0 01-2-2V3a2 2 0 012-2zm15 21v7m0 2v2",stroke:"#E65C5C",strokeWidth:2,strokeLinejoin:"round"}),r.a.createElement("path",{d:"M21 2l15 15H23a2 2 0 01-2-2V2z",fill:"#E65C5C"})))}function Dr(e){return r.a.createElement("svg",Object.assign({width:26,height:26,viewBox:"0 0 26 26"},e),r.a.createElement("path",{d:"M13 25c6.627 0 12-5.373 12-12S19.627 1 13 1 1 6.373 1 13",stroke:"#171917",strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function Nr(e){return r.a.createElement("svg",Object.assign({width:12,height:14,viewBox:"0 0 12 14"},e),r.a.createElement("path",{d:"M8 1H4a3 3 0 00-3 3v6h0m4-6h5a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5a1 1 0 011-1z",stroke:"currentColor",strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}n(1120);function _r(){return r.a.createElement("div",{className:"loading-spinner"},r.a.createElement(Dr,null))}function Mr(e){var t=e.file,n=e.url,s=e.status,o=e.progress,i=e.error,c=Object(a.useState)(!1),l=Object(Z.a)(c,2),p=l[0],u=l[1],d=Object(a.useRef)(null);Object(a.useEffect)((function(){if(p){var e=setTimeout((function(){u(!1)}),1500);return function(){return clearTimeout(e)}}}),[p,u]);var f=p?"Copied!":"Copy to clipboard";return r.a.createElement("div",{className:"upload-file"},r.a.createElement("div",{className:"upload-file-icon"},"uploading"===s||"processing"===s?r.a.createElement(Ir,null):"error"===s?r.a.createElement(Lr,null):r.a.createElement(Pr,null)),r.a.createElement("div",{className:"upload-file-text"},r.a.createElement("h3",null,t.name),r.a.createElement("p",null,"uploading"===s&&function(e){return-1===e?"Waiting...":e>0?"Uploading ".concat(Math.round(100*e),"%"):"Uploading..."}(o),"processing"===s&&"Processing...","error"===s&&r.a.createElement("span",{className:"red-text"},i||"Upload failed."),"complete"===s&&r.a.createElement("a",{href:n,className:"url green-text",target:"_blank",rel:"noopener noreferrer"},n))),("uploading"===s||"processing"===s)&&r.a.createElement("div",{className:"upload-file-loading"},r.a.createElement(_r,null)),"complete"===s&&r.a.createElement("button",{onClick:function(e){d.current.select(),document.execCommand("copy"),e.target.focus(),u(!0)},className:"upload-file-copy"},r.a.createElement("p",{className:"upload-file-copy-tooltip"},f),r.a.createElement("div",{className:"upload-file-copy-button"},"Copy Link",r.a.createElement(Nr,null)),r.a.createElement("textarea",{value:n,ref:d,readOnly:!0})))}function Ur(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}var Fr=r.a.forwardRef((function(e,t){var n=Object(f.c)(),s=Object(a.useState)([]),o=Object(Z.a)(s,2),i=o[0],c=o[1],l=Object(a.useState)(!1),p=Object(Z.a)(l,2),u=p[0],d=p[1],h=Object(a.useState)(!1),m=Object(Z.a)(h,2),y=m[0],k=m[1],S=null!=e.portal?e.portal:P,v=new bt.SkynetClient(S);Object(a.useEffect)((function(){n({type:"ACT_TY_SET_UPLOAD_LIST",payload:i})}),[i]),Object(a.useEffect)((function(){e.directoryMode||y?_.current.setAttribute("webkitdirectory","true"):_.current.removeAttribute("webkitdirectory")}),[e.directoryMode,y]);var C=function(e){return e.webkitRelativePath||e.path||e.name},j=function(e){var t=C(e),n=oe.a.parse(t),a=n.root,r=n.dir,s=n.base,o=oe.a.normalize(r).slice(a.length).split(oe.a.sep).slice(1);return oe.a.join.apply(oe.a,Object(g.a)(o).concat([s]))},A=function(e){var t=C(e),n=oe.a.parse(t),a=n.root,r=n.dir;return oe.a.normalize(r).slice(a.length).split(oe.a.sep)[0]},x=function(e){if(e.response){if(e.response.data.message)return"Upload failed with error: ".concat(e.response.data.message);var t=e.response.status,n=q.a.getStatusText(e.response.status);return"Upload failed, our server received your request but failed with status code: ".concat(t," ").concat(n)}return e.request?navigator.onLine?"Server failed to respond to your request, please try again later.":"You are offline, please connect to the internet and try again":"Critical error, please refresh the application and try again. ".concat(e.message)},T=function(){var t=Object(O.a)(E.a.mark((function t(n){var a,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e.directoryMode||y)&&n.length&&(a=A(n[0]),n=[{name:a,directory:!0,files:n}]),c((function(e){return[].concat(Object(g.a)(n.map((function(e){return{file:e,status:"uploading"}}))),Object(g.a)(e))})),r=function(e,t){c((function(n){var a=n.findIndex((function(t){return t.file===e}));return[].concat(Object(g.a)(n.slice(0,a)),[Object(b.a)(Object(b.a)({},n[a]),t)],Object(g.a)(n.slice(a+1)))}))},t.next=5,n.reduce(function(){var t=Object(O.a)(E.a.mark((function t(n,a){var s,o,i,c,l,p;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:if(!(a.size>$()("1 GB"))){t.next=5;break}return r(a,{status:"error",error:"This file size exceeds the maximum allowed size of 1 GB."}),t.abrupt("return");case 5:if(e.onUploadStart&&e.onUploadStart(),!(s=a.type)||!s.startsWith("image")){t.next=14;break}return t.next=10,Or(a);case 10:return i=t.sent,t.next=13,v.uploadFile(i);case 13:o=t.sent;case 14:if(!s||!s.startsWith("video")){t.next=21;break}return t.next=17,gr({file:a});case 17:return c=t.sent,t.next=20,v.uploadFile(c);case 20:o=t.sent;case 21:return l=function(e){r(a,{status:1===e?"processing":"uploading",progress:e})},p=function(){var t=Object(O.a)(E.a.mark((function t(){var n,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a.directory){t.next=8;break}return i=a.files.reduce((function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(V.a)({},j(t),t))}),{}),t.next=5,v.uploadDirectory(i,encodeURIComponent(a.name),{onUploadProgress:l});case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,v.uploadFile(a,{onUploadProgress:l});case 10:n=t.sent;case 11:return t.next=13,e.onUpload({skylink:Object(bt.parseSkylink)(n),name:a.name,contentType:s,thumbnail:null!=o?Object(bt.parseSkylink)(o):null,contentLength:a.size});case 13:r(a,{status:"complete",url:v.getSkylinkUrl(n)}),e.onUploadEnd&&e.onUploadEnd(),t.next=25;break;case 17:if(t.prev=17,t.t0=t.catch(0),!t.t0.response||t.t0.response.status!==q.a.TOO_MANY_REQUESTS){t.next=22;break}return r(a,{progress:-1}),t.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(p())}),3e3)})));case 22:r(a,{status:"error",error:x(t.t0)}),d(!0),e.onUploadEnd&&e.onUploadEnd();case 25:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),t.next=25,p();case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),void 0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=Object(ce.a)({onDrop:T}),L=I.getRootProps,D=I.getInputProps,N=I.isDragActive,_=I.inputRef;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home-upload"},r.a.createElement("div",null,r.a.createElement(w.a,{container:!0,spacing:1,direction:"row",className:"side-padding-0"},r.a.createElement(w.a,Object.assign({item:!0,xs:12,sm:9,className:ae()("home-upload-dropzone",{"drop-active":N})},L(),{ref:t}),r.a.createElement("span",{className:"home-upload-text"},r.a.createElement("h3",null,r.a.createElement(Tr.a,null)," Upload your ",e.directoryMode||y?"Directory":"Files"))),r.a.createElement(w.a,{item:!0,xs:12,sm:3},r.a.createElement("div",{className:"float-right upload-dir-switch"},r.a.createElement(te.a,{className:"no-gutters",control:r.a.createElement(ee.a,{checked:y,onChange:function(e){return k(e.target.checked)},name:"checkedA",className:"app-bg-switch"}),label:"Directory"}))),r.a.createElement("input",Object.assign({id:"idInp"},D(),{className:"offscreen"}))))),i.length>0&&r.a.createElement("div",{className:"home-uploaded-files"},i.map((function(e,t){return r.a.createElement(Mr,Object.assign({key:t},e))}))),r.a.createElement(ie.a,{open:u,autoHideDuration:4e3,onClose:function(){return d(!1)}},r.a.createElement(Ur,{onClose:function(){return d(!1)},severity:"error"},"Error on upload!")))})),Kr=n(1320),Rr=n(1324),Hr=n(142),Br=n.n(Hr),Yr=n(208),Wr=n.n(Yr),Jr=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Object.assign({direction:"up",ref:t},e))})),Gr=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).displayContent=function(){switch(e.props.type){case"public-share":return r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},"Skylinks are available at the following public link :"),r.a.createElement(wa.a,null,r.a.createElement(r.a.Fragment,null,e.props.content,r.a.createElement(Ue.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(Br.a,{onClick:function(){return navigator.clipboard.writeText(e.props.content)},className:"cursor-pointer",style:{color:x,paddingLeft:5}})))));default:return r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},e.props.content,e.props.showClipboardCopy&&r.a.createElement(Ue.a,{title:e.props.clipboardCopyTooltip||"Copy Skylink to clipboard",arrow:!0},r.a.createElement(Br.a,{onClick:function(){return navigator.clipboard.writeText(e.props.content)},className:"cursor-pointer",style:{color:x,paddingLeft:5}}))))}},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(Ea.a,{open:this.props.open,onClose:this.props.onClose,TransitionComponent:Jr,keepMounted:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ja.a,{id:"alert-dialog-title"},this.props.title),this.displayContent(),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:this.props.onClose,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement(Wr.a,null)},"OK")))}}]),n}(r.a.Component),zr=n(409),Vr=n.n(zr);function Zr(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}var Qr=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).launchSkyLink=function(e){br(e,a.props.snUserSetting)},a.removeFromSkyspace=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.app.skhubId,"undefined"==typeof a.props.skyspace||!a.props.skyspace){e.next=6;break}return e.next=4,ln(a.props.userSession,a.props.skyspace,t);case 4:e.next=8;break;case 6:return e.next=8,nn(a.props.userSession,t,a.props.app.skyspaceList);case 8:a.props.fetchSkyspaceAppCount(),a.props.setLoaderDisplay(!1),a.props.onDelete();case 11:case"end":return e.stop()}}),e)}))),a.handleSkyspaceAdd=function(e){var t=e.skhubId;rn(a.props.userSession,t).then((function(e){var t=[];return null!=e&&null!=e.skyspaceForSkhubIdList&&(t=e.skyspaceForSkhubIdList),a.props.snSkyspaceList.filter((function(e){return-1===t.indexOf(e)}))})).then((function(e){if(null!=e&&e.length>0)a.setState({showAddToSkyspace:!0,availableSkyspaces:e});else{var t=a.state.snInfoModal;t.open=!0,a.setState({snInfoModal:t})}}))},a.saveAddToSkyspaceChanges=function(){var e=Object(O.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||0===n.lenghth){e.next=8;break}return a.props.setLoaderDisplay(!0),e.next=4,an(a.props.userSession,t.skhubId,n);case 4:a.props.setLoaderDisplay(!1),a.setState({showAddToSkyspace:!1}),a.props.fetchSkyspaceAppCount(),a.props.fetchSkyspaceDetail();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.download=function(e){a.props.setLoaderDisplay(!0),un(a.props.userSession,{skylink:e.skylink,fileName:e.name,action:"Download",contentLength:"",contentType:"",skhubId:e.skhubId,skyspaces:[],savedToSkySpaces:!1}).then((function(){a.props.setLoaderDisplay(!1),a.launchSkyLink(e.skylink)}))},a.copyToClipboard=function(e){navigator.clipboard.writeText(a.props.app.skylink),a.setState({openCopySuccess:!0})},a.closeCopySucess=function(){a.setState({openCopySuccess:!1})},a.renderOtherSpaces=function(){if(a.props.allSpacesObj){var e=Object.keys(a.props.allSpacesObj).filter((function(e){var t;return a.props.allSpacesObj.hasOwnProperty(e)&&a.props.skyspace!==e&&(null===(t=a.props.allSpacesObj[e])||void 0===t?void 0:t.indexOf(a.props.app.skhubId))>-1}));return e&&e.length>0?r.a.createElement("div",null,r.a.createElement("span",{className:"pr-2 pl-2"},r.a.createElement("b",null,"Other Spaces:")),e.map((function(e,t){return r.a.createElement(Le.a,{key:t,label:e,variant:"outlined",size:"small",style:{backgroundColor:x}})}))):""}},a.state={expanded:!1,openCopySuccess:!1,showAddToSkyspace:!1,isSelected:!1,availableSkyspaceToAddTo:[],snInfoModal:{open:!1,onClose:function(){var e=a.state.snInfoModal;e.open=!1,a.setState({snInfoModal:e})},title:"Add To Spaces",description:"This Skylink is already present in all Spaces."}},a.openSkyApp=a.openSkyApp.bind(Object(C.a)(a)),a.trimDescription=a.trimDescription.bind(Object(C.a)(a)),a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.isSelect!==this.props.isSelect&&this.setState({isSelected:!1})}},{key:"trimDescription",value:function(e,t){return e&&e.length>t?e.slice(0,t-3)+"...":e}},{key:"openSkyApp",value:function(e){this.props.onOpenSkyApp(e)}},{key:"render",value:function(){var e=this,t=this.props.app;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:12,className:"side-padding-0"},r.a.createElement(Qe.a,{className:"card"},r.a.createElement(ka.a,{className:"no-padding-b",title:r.a.createElement("div",null,null!=t.type&&j(t.type).map((function(n,a){return null!=hr[n]?r.a.createElement("div",{key:a},r.a.createElement("span",{style:{color:x},className:"pr-2"},hr[n].getLogo()),r.a.createElement(qe.a,{variant:"inherit",className:"font-weight-bold cursor-pointer h5",color:"black",onClick:function(){e.download(t)}},va()(t.name,100,{position:"middle"})),r.a.createElement("span",{className:"display-5 skyspaceCardTime"},"| Create Time:"," ",Vr()(t.createTS).format("MM/DD/YYYY h:mm:ss a")),e.props.isSelect&&r.a.createElement(r.a.Fragment,null,-1===e.props.arrSelectedAps.indexOf(t)&&r.a.createElement(ze.a,{className:"selection-radio",onClick:function(){return e.props.onSelection(t)}}),e.props.arrSelectedAps.indexOf(t)>-1&&r.a.createElement(Je.a,{className:"selection-radio",onClick:function(){return e.props.onSelection(t,!0)}}))):r.a.createElement(qe.a,{variant:"inherit",className:"font-weight-bold cursor-pointer h5",color:"black",onClick:function(){e.download(t)}},va()(t.name,100,{position:"middle"}))}))),subheader:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,t.skylink),r.a.createElement(Ue.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(Br.a,{onClick:this.copyToClipboard,className:"cursor-pointer",style:{color:x,paddingLeft:5}})),r.a.createElement("br",null),"Content-Type: ",r.a.createElement("font",{color:"primary"},t.contentType)," | Content-Size:"," ",r.a.createElement("font",{color:"primary"},Er(t.contentLength)," ")),subheaderTypographyProps:{variant:"h9"}}),r.a.createElement(ba.a,{className:"no-padding-b"},this.trimDescription(t.description,200)," ",r.a.createElement("br",null),this.renderOtherSpaces()),r.a.createElement("div",null,r.a.createElement(He,{app:t,hash:this.props.hash,hideDelete:null!=this.props.senderId,hideAdd:null!=this.props.senderId,onAdd:function(){return e.handleSkyspaceAdd(t)},onEdit:function(){return e.openSkyApp(t)},onLaunch:function(){return e.launchSkyLink(t.skylink)},onDelete:function(){return e.removeFromSkyspace()},onDownload:function(){return e.download(t)}})))),r.a.createElement(Wa,{userSession:this.props.userSession,open:this.state.showAddToSkyspace,availableSkyspaces:this.state.availableSkyspaces,onClose:function(){return e.setState({showAddToSkyspace:!1})},onSave:function(n){return e.saveAddToSkyspaceChanges(t,n)}}),r.a.createElement(Gr,{open:this.state.snInfoModal.open,onClose:this.state.snInfoModal.onClose,title:this.state.snInfoModal.title,content:this.state.snInfoModal.description}),r.a.createElement(ie.a,{open:this.state.openCopySuccess,autoHideDuration:3e3,onClose:this.closeCopySucess},r.a.createElement(Zr,{onClose:this.closeCopySucess,severity:"success"},"Skylink successfully copied to clipboard!")))}}]),n}(r.a.Component),qr=Object(m.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},small:{width:e.spacing(3),height:e.spacing(3)},avatar:{backgroundColor:_e.a[500]},expand:{transform:"rotate(0deg)",marginLeft:"0px",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}))(Object(f.b)((function(e){return{isShowing:e.snLoader,snApps:e.snApps,snUserSetting:e.snUserSetting,snSkyspaceList:e.snSkyspaceList,userSession:e.userSession}}),(function(e){return Object(Xe.bindActionCreators)({setLoaderDisplay:Ye,fetchAppDetail:Bn,fetchSkyspaceAppCount:ya,fetchSkyspaceDetail:Qn},e)}))(Qr)),Xr=function(e){return{type:"ACT_TY_SET_PUBLIC_HASH",payload:e}},$r=function(e){return{type:"ACT_TY_SET_PUBLIC_IN_MEMORY",payload:e}};var es=n(1318),ts=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(C.a)(a)),a}return Object(c.a)(n,[{key:"onChange",value:function(e,t){this.props.onChange(t)}},{key:"getPaginationCount",value:function(){var e=this.props.totalCount;return Math.ceil(e/9)}},{key:"render",value:function(){var e=this.props.page;return r.a.createElement(es.a,{count:this.getPaginationCount(),page:e,onChange:this.onChange,color:"primary",className:"cards-pagination"})}}]),n}(r.a.Component),ns=n(799),as=n.n(ns),rs=n(798),ss=n.n(rs),os=n(322),is=n.n(os),cs=function(e){var t=e.file,n=t.file,a=t.progress,s=t.status,o=t.url;return r.a.createElement("div",{className:is.a.wrapperItem},r.a.createElement("div",{className:is.a.leftSide},r.a.createElement("div",{className:is.a.progressBar},r.a.createElement("div",{style:{width:"".concat(100*(isNaN(a)||"error"===s?0:a),"%")}})),r.a.createElement("label",null,n.directory?n.name:n.path),r.a.createElement("label",null,"complete"!==s?s:function(e){return r.a.createElement(r.a.Fragment,null,va()(e,40),r.a.createElement(Br.a,{onClick:function(){return t=e,void navigator.clipboard.writeText(t);var t},className:"cursor-pointer icn-app-bg-clr",style:{fontSize:15}}))}(o))),r.a.createElement("span",{className:is.a.percentage},100*(isNaN(a)||"error"===s?0:a.toFixed(2)),"%"))},ls=n(438),ps=n.n(ls),us=Object(f.b)((function(e){return{fileProgress:e.snUploadList}}))((function(e){var t=e.fileProgress,n=(e.uploadFile,t.length),s=Object(a.useState)(!1),o=Object(Z.a)(s,2),i=o[0],c=o[1];return Object(a.useEffect)((function(){i&&c(!1)}),[n]),n>0?r.a.createElement("div",{className:ps.a.wrapper},r.a.createElement("div",{className:ps.a.uploadFileStatusTitle+" app-bg-color"},"Uploading File",!i&&r.a.createElement(ss.a,{className:"float-right cursor-pointer",onClick:function(){return c(!0)}}),i&&r.a.createElement(as.a,{className:"float-right cursor-pointer",onClick:function(){return c(!1)}})),r.a.createElement("div",{className:ps.a.progressContainer,style:i?{height:0}:{}},t&&t.length>0?t.map((function(e,t){return r.a.createElement(cs,{key:t,file:e})})):null)):null})),ds=n(800),fs=n.n(ds);n(1121);function hs(e){var t=Object(f.c)(),n=Object(f.d)((function(e){return e.SnAudioPlayer.audioList})),a=Object(f.d)((function(e){return e.SnAudioPlayer.playing})),s=Object(f.d)((function(e){return e.SnAudioPlayer.currentAudio}));Object(f.d)((function(e){return e.SnAudioPlayer}));return r.a.createElement("div",{className:"audio-player-wrapper"},r.a.createElement(fs.a,{data:n,play:a,currentAudio:s,showLyricNormal:!1,showDetailLyric:!1,onPlayStatusChange:function(e,n){t(sr(n))},onAudioChange:function(e,n){!function(e,n){e&&t(rr(n))}(e,n)}}))}var ms=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateSwitches=function(e){var t=a.state.filterCriteria;t.switchFilterList=e,a.setState({filterCriteria:t})},a.updateTagFilterList=function(e){var t=a.state.filterCriteria;t.tagFilterList=e,t.page=1,a.setState({filterCriteria:t})},a.udpdatePage=function(e){var t=a.state.filterCriteria;t.page=e,a.setState({filterCriteria:t})},a.getSearchKeyFromQuery=function(){var e=a.props.location.search;return decodeURIComponent(e.replace("?query=",""))},a.getCategoryWiseCount=function(){var e={};return a.props.snApps.forEach((function(t){e[t.type]=e[t.type]?e[t.type]+1:1})),e},a.tagFilter=function(e){return 0===a.state.filterCriteria.tagFilterList.length||j(e.type).filter((function(e){return a.state.filterCriteria.tagFilterList.indexOf(e)>-1})).length>0},a.handleSkyspaceAdd=function(e){var t=e.skhubId;rn(a.props.userSession,t).then((function(e){return console.log("skyspacesForApp ",e),null==e&&(e=[]),a.props.snSkyspaceList.filter((function(t){return!e.includes(t)}))})).then((function(e){console.log("availableSkyspaces",e),null!=e&&e.length>0?a.setState({showAddToSkyspace:!0,availableSkyspaces:e}):console.log("NO new skyspace available")}))},a.selectApp=function(e,t){var n=a.state.arrSelectedAps;if(t){var r=n.indexOf(e);r>-1&&n.splice(r,1)}else n.push(e);a.setState({arrSelectedAps:n})},a.renderCards=function(e,t,n,s){var o=a.state.filterCriteria.tagFilterList,i="";return null!=o&&o.length>0&&(i=o[0]),null!=hr[i]&&null!=hr[i].cards?hr[i].cards(t,e,s,9,a.openSkyApp,(function(e,t){return a.selectApp(e,t)}),a.state.isSelect,a.state.arrSelectedAps,a.state.hash,(function(){return a.getAppList(a.state.category,a.state.skyspace,a.state.fetchAllSkylinks)}),a.state.senderId):r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(w.a,{container:!0,spacing:1},e.slice(9*(t-1),9*(t-1)+9).map((function(t,n){return 1,r.a.createElement(qr,{key:n,app:t,hash:a.state.hash,isSelect:a.state.isSelect,arrSelectedAps:a.state.arrSelectedAps,skyspace:s,senderId:a.state.senderId,allSpacesObj:a.props.snSkyspaceDetail,cardCount:e.length,onSelection:function(e,t){return a.selectApp(e,t)},onOpenSkyApp:a.openSkyApp,onDelete:function(){a.props.fetchSkyspaceDetail(),a.getAppList(a.state.category,a.state.skyspace,a.state.fetchAllSkylinks)}})}))))},a.createSkylinkPublicShare=Object(O.a)(E.a.mark((function e(){var t,n,r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===a.state.arrSelectedAps.length){e.next=15;break}return a.props.setLoaderDisplay(!0),r=jt({data:a.state.arrSelectedAps,history:[{creationDate:new Date}]}),s=(null===(t=a.props.snUserSetting)||void 0===t||null===(n=t.setting)||void 0===n?void 0:n.portal)||P,e.next=6,new bt.SkynetClient(s).uploadFile(r);case 6:(o=e.sent)&&(o={skylink:Object(bt.parseSkylink)(o)}),(i={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}).fileName="Public Share",i.skylink=o.skylink,i.action="Public Share",un(a.props.userSession,i),a.setState({showInfoModal:!0,onInfoModalClose:function(){return a.setState({showInfoModal:!1})},infoModalContent:"".concat(a.props.snUserSetting.setting.portal).concat("AABUuxbDppnCu6Pz4MNWzw2UW63Bl4g-7LKWSHbWD7khcA","/#/").concat("public-cards/","?sialink=").concat(o.skylink)}),a.props.setLoaderDisplay(!1);case 15:case"end":return e.stop()}}),e)}))),a.deleteFromPublic=function(e){if(a.state.isSelect&&a.state.arrSelectedAps.length>0){console.log("public apps to delete ",a.state.arrSelectedAps);var t=a.props.snPublicInMemory;t.deletedSkapps=Object(g.a)(new Set([].concat(Object(g.a)(t.deletedSkapps),Object(g.a)(a.state.arrSelectedAps)))),a.props.setApps(wr(a.props.snApps,t.addedSkapps,t.deletedSkapps))}},a.onPublicUpload=function(e){var t=Object(b.a)(Object(b.a)({},$e()),e);Cr(t.contentType,t),t.skhubId=Object(Kr.a)(),console.log(" upload complete ",t);var n=a.props.snPublicInMemory;n.addedSkapps=Object(g.a)(new Set([t].concat(Object(g.a)(n.addedSkapps)))),a.props.setApps(wr(a.props.snApps,n.addedSkapps,n.deletedSkapps))},a.addPublicSpaceToAccount=Object(O.a)(E.a.mark((function e(){var t,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,a.props.setLoaderDisplay(!0),e.next=4,At(a.state.hash,a.props.snPublicInMemory);case 4:n=e.sent,a.props.setLoaderDisplay(!1),r="/login?sharedhash="+((null===(t=n)||void 0===t?void 0:t.skylink)||a.state.hash),document.location.href="https://skyspaces.io/#"+r;case 8:case"end":return e.stop()}}),e)}))),a.savePublicSpace=Object(O.a)(E.a.mark((function e(){var t,n,r,s,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,wt(a.state.hash);case 3:return t=e.sent,n=wr(t.data,a.props.snPublicInMemory.addedSkapps,a.props.snPublicInMemory.deletedSkapps),t.history[t.history.length-1].skylink=a.state.hash,t.history.push({creationDate:new Date}),t.data=n,r=jt(t),s=-1===document.location.origin.indexOf("localhost")?document.location.origin:P,e.next=12,new bt.SkynetClient(s).uploadFile(r);case 12:o=e.sent,a.props.setLoaderDisplay(!1),i=document.location.href.replace(a.state.hash,Object(bt.parseSkylink)(o)),a.setState({showInfoModal:!0,infoModalContent:i,onInfoModalClose:function(){a.setState({showInfoModal:!1}),document.location.href=i}});case 16:case"end":return e.stop()}}),e)}))),a.state={goToApp:!1,senderId:null,loadingAllSpacesInfo:!0,showAddToSkyspace:!1,skyappId:"",apps:[],allSpacesObj:null,error:null,fetchAllSkylinks:!1,category:null,skyspace:null,searchKey:"",filteredApps:[],tagFilterList:[],filterCriteria:{searchString:"",page:1,tagFilterList:[],switchFilterList:[]},isSelect:!1,arrSelectedAps:[],hash:null,showInfoModal:!1,infoModalContent:null,isDir:!1},a.openSkyApp=a.openSkyApp.bind(Object(C.a)(a)),a.handleSrchSbmt=a.handleSrchSbmt.bind(Object(C.a)(a)),a.handleSrchKeyChng=a.handleSrchKeyChng.bind(Object(C.a)(a)),a.getFilteredApps=a.getFilteredApps.bind(Object(C.a)(a)),a.uploadEleRef=r.a.createRef(),a}return Object(c.a)(n,[{key:"handleSrchSbmt",value:function(e){e.preventDefault()}},{key:"handleSrchKeyChng",value:function(e,t){null!=e&&e.preventDefault();var n=this.state.filterCriteria;n.page=1,this.setState({searchKey:null!=e?e.target.value:t,filterCriteria:n})}},{key:"searchFilter",value:function(e,t){if(!t||""===t.trim())return e;for(var n in e)if(e[n]&&e[n].toLowerCase().equals(t.toLowerCase()))return e}},{key:"openSkyApp",value:function(e){var t=this.state.category,n=this.state.skyspace,a="";null!=t&&""!==t.trim()?a=e.id:(null!=n&&""!==n.trim()||this.state.fetchAllSkylinks)&&(a=e.skhubId),this.setState({goToApp:!0,skyappId:encodeURIComponent(a)})}},{key:"getAppList",value:function(){var e=Object(O.a)(E.a.mark((function e(t,n,a,r){var s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.getSenderId(),null!=t&&this.props.fetchApps(t),null==n){e.next=13;break}if(null==s){e.next=12;break}return this.props.setLoaderDisplay(!0),e.next=7,xn(this.props.userSession,decodeURIComponent(s),n);case 7:o=e.sent,this.props.setLoaderDisplay(!1),this.props.setApps(o),e.next=13;break;case 12:this.props.fetchSkyspaceApps({session:this.props.userSession,skyspace:n});case 13:null!=r&&(this.props.setDesktopMenuState(!1),this.props.setPortalsListAction(z),this.props.fetchPublicApps(r)),!0===a?(this.handleSrchKeyChng(null,this.getSearchKeyFromQuery()),this.props.fetchAllSkylinks({session:this.props.userSession})):this.handleSrchKeyChng(null,"");case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getSenderId",value:function(){if(this.props.location.pathname.indexOf("imported-spaces")>-1)return this.props.match.params.sender}},{key:"componentDidMount",value:function(){var e=this.props.match.params.skyspace,t=this.props.match.params.category,n=this.getSenderId(),a=this.props.location.search.indexOf("?sialink=")>-1?this.props.location.search.replace("?sialink=","").trim():"",r=""===a?null:a;r&&this.props.setPublicHash(r);var s="/skylinks"===this.props.match.path;this.setState({skyspace:e,category:t,fetchAllSkylinks:s,page:1,hash:r,senderId:n}),this.props.fetchSkyspaceDetail(),this.getAppList(t,e,s,r,n)}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.match.params.skyspace,r=this.props.match.params.category,s=this.getSenderId(),o=this.props.location.search.indexOf("?sialink=")>-1?this.props.location.search.replace("?sialink=","").trim():"",i=""===o?null:o,c="/skylinks"===this.props.match.path;(this.state.category!==r||this.state.hash!==i||this.state.skyspace!==a||this.state.fetchAllSkylinks!==c||this.state.senderId!==s||c&&this.getSearchKeyFromQuery()!==this.state.searchKey)&&(this.props.fetchSkyspaceDetail(),this.updateTagFilterList([]),this.setState({skyspace:a,hash:i,fetchAllSkylinks:c,category:r,page:1,senderId:s}),i&&this.props.setPublicHash(i),this.getAppList(r,a,c,i,s))}},{key:"getFilteredApps",value:function(){var e=this.state.searchKey;return this.props.snApps.filter(this.tagFilter).filter((function(t){if(!e||""===e.trim())return t;for(var n in t)if(t.hasOwnProperty(n)&&"category"!==n&&null!=t[n]&&t[n].toString().toLowerCase().indexOf(e.toLowerCase())>-1)return t;return""}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.goToApp,a=t.skyappId,s=t.fetchAllSkylinks,o=this.state.filterCriteria.page,i=this.state.filterCriteria.tagFilterList,c="";null!=i&&i.length>0&&(c=i[0]);var l=this.getCategoryWiseCount(),p=this.state.skyspace;if(n){var u=this.state.category,d="";return null!=u&&""!==u.trim()?d="category":(null!=p&&""!==p.trim()||s)&&(d="skyspace"),null!=this.state.senderId?r.a.createElement(S.a,{to:"/imported-skyapps/".concat(encodeURIComponent(this.state.senderId),"/").concat(a,"?source=").concat(d)}):r.a.createElement(S.a,{to:"/skyapps/"+a+"?source="+d})}var f=this.getFilteredApps();return r.a.createElement("div",{className:"card-parent-conatiner"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(w.a,{container:!0,spacing:1,className:"align-self-auto"},r.a.createElement(w.a,{container:!0,spacing:1,direction:"row",justify:"space-between",alignItems:"center",className:"skyspaceMainPageHeader"},null==this.state.hash&&r.a.createElement(w.a,{item:!0,xs:12}," ","Space : ",p),null!=this.state.hash&&r.a.createElement(w.a,{item:!0,xs:12},"Public Space")),f.length>0&&r.a.createElement(w.a,{item:!0,xs:12,sm:12,className:"filter-grid"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"category-filter"},r.a.createElement(Le.a,{label:r.a.createElement("div",{className:"category-filter-chip"},"All",r.a.createElement(Rr.a,null,this.props.snApps&&this.props.snApps.length)),onClick:function(){return e.updateTagFilterList([])},className:"cursor-pointer",style:null!=this.state.filterCriteria&&0===this.state.filterCriteria.tagFilterList.length?{backgroundColor:x}:{}})),Object.keys(mr()).filter((function(e){return l[e]&&"0"!=l[e]})).map((function(t,n){return r.a.createElement("div",{className:"category-filter",key:n,onClick:function(){return e.updateTagFilterList([t])}},r.a.createElement(Le.a,{label:r.a.createElement("div",{className:"category-filter-chip"},mr()[t].heading,r.a.createElement(Rr.a,null,l[t]?l[t]:0)),className:"cursor-pointer",style:null!=e.state.filterCriteria&&e.state.filterCriteria.tagFilterList.indexOf(t)>-1?{"background-color":x}:{},icon:hr[t].getLogo()}))})))))),r.a.createElement("div",{className:"card-container row"},r.a.createElement(w.a,{container:!0,spacing:1},null!=this.state.hash&&f.length>0&&r.a.createElement(w.a,{item:!0,xs:12,className:"public-cards-action"},r.a.createElement(xa.a,{variant:"contained",onClick:this.addPublicSpaceToAccount,color:"primary",className:"btn-bg-color"},"Add To Skyspaces"),r.a.createElement(xa.a,{variant:"contained",onClick:function(){return e.uploadEleRef.current.click()},color:"primary",className:"btn-bg-color"},"Upload"),r.a.createElement(te.a,{className:"no-gutters",control:r.a.createElement(ee.a,{checked:this.isDir,onChange:function(t){return e.setState({isDir:t.target.checked})},name:"checkedA",className:"app-bg-switch"}),label:"Directory"}),r.a.createElement("div",{className:"d-none"},r.a.createElement(Fr,{name:"files",ref:this.uploadEleRef,directoryMode:this.state.isDir,onUpload:this.onPublicUpload,portal:kr(this.props.snUserSetting)})),r.a.createElement(xa.a,{variant:"contained",onClick:this.savePublicSpace,color:"primary",className:"btn-bg-color float-right"},"Save"),r.a.createElement(xa.a,{variant:"contained",onClick:this.deleteFromPublic,color:"primary",className:"btn-bg-color float-right"},"Delete"),r.a.createElement(xa.a,{variant:"contained",onClick:function(){return e.setState({isSelect:!0,arrSelectedAps:f})},color:"primary",className:"btn-bg-color float-right"},"Select All"),!this.state.isSelect&&r.a.createElement(xa.a,{variant:"contained",onClick:function(){return e.setState({isSelect:!0,arrSelectedAps:[]})},color:"primary",className:"btn-bg-color float-right"},"Select"),this.state.isSelect&&r.a.createElement(xa.a,{onClick:function(){return e.setState({isSelect:!1,arrSelectedAps:[]})},variant:"contained",color:"primary",className:"btn-bg-color float-right"},"Cancel")),null==this.state.hash&&f.length>0&&null==this.state.senderId&&r.a.createElement(w.a,{item:!0,xs:12,className:"muti-cards-action"},!this.state.isSelect&&r.a.createElement(xa.a,{variant:"contained",onClick:function(){return e.setState({isSelect:!0,arrSelectedAps:[]})},color:"primary",className:"btn-bg-color"},"Select"),this.state.isSelect&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xa.a,{onClick:function(){return e.setState({isSelect:!1,arrSelectedAps:[]})},variant:"contained",color:"primary",className:"btn-bg-color"},"Cancel"),r.a.createElement(xa.a,{onClick:function(){return e.setState({arrSelectedAps:f})},variant:"contained",color:"primary",className:"btn-bg-color"},"Select All"),r.a.createElement(xa.a,{onClick:function(){return e.setState({arrSelectedAps:[]})},variant:"contained",color:"primary",className:"btn-bg-color"},"De-Select All"),r.a.createElement(xa.a,{onClick:function(){return e.createSkylinkPublicShare()},variant:"contained",color:"primary",className:"btn-bg-color"},"Public Share"))),this.renderCards(f,o,0,p),r.a.createElement(w.a,{item:!0,xs:12},"audio"===c?r.a.createElement(hs,null):r.a.createElement(ts,{page:o,totalCount:f.length,onChange:this.udpdatePage}))))),r.a.createElement(Gr,{open:this.state.showInfoModal,onClose:this.state.onInfoModalClose,title:"Public Share Link",type:"public-share",content:this.state.infoModalContent}),this.state.hash&&r.a.createElement(us,null))}}]),n}(r.a.Component),ys=Object(m.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)},avatar:{backgroundColor:_e.a[500]},expand:{transform:"rotate(0deg)",marginLeft:"0px",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}))(Object(f.b)((function(e){return{isShowing:e.snLoader,snApps:e.snApps,userSession:e.userSession,snSkyspaceDetail:e.snSkyspaceDetail,snUserSetting:e.snUserSetting,snPublicInMemory:e.snPublicInMemory}}),(function(e){return Object(Xe.bindActionCreators)({setLoaderDisplay:Ye,fetchApps:pt,fetchSkyspaceApps:mt,fetchAllSkylinks:ht,fetchSkyspaceDetail:Qn,fetchPublicApps:ut,setDesktopMenuState:$a,setPortalsListAction:ra,setPublicHash:Xr,setPublicInMemory:$r,setApps:ft},e)}))(ms)),ks=n(265),Ss=n.n(ks),bs=n(417),gs=n.n(bs),vs=n(425),Es=n.n(vs),Os=n(418),Cs=n.n(Os),ws=n(424),js=n.n(ws),As=n(272),xs=n.n(As),Ts=n(271),Is=n.n(Ts),Ps=n(419),Ls=n.n(Ps),Ds=n(421),Ns=n.n(Ds),_s=n(422),Ms=n.n(_s),Us=n(423),Fs=n.n(Us),Ks=n(426),Rs=n.n(Ks),Hs=n(420),Bs=n.n(Hs),Ys=n(267),Ws=n.n(Ys),Js=n(427),Gs=n.n(Js);var zs=n(233),Vs=void 0,Zs={Add:r.a.forwardRef((function(e,t){return r.a.createElement(gs.a,Object.assign({},e,{ref:t}))})),Check:r.a.forwardRef((function(e,t){return r.a.createElement(Cs.a,Object.assign({},e,{ref:t}))})),Clear:r.a.forwardRef((function(e,t){return r.a.createElement(Is.a,Object.assign({},e,{ref:t}))})),Delete:r.a.forwardRef((function(e,t){return r.a.createElement(Ke.a,Object.assign({},e,{ref:t}))})),DetailPanel:r.a.forwardRef((function(e,t){return r.a.createElement(xs.a,Object.assign({},e,{ref:t}))})),Edit:r.a.forwardRef((function(e,t){return r.a.createElement(Ls.a,Object.assign({},e,{ref:t}))})),Export:r.a.forwardRef((function(e,t){return r.a.createElement(Bs.a,Object.assign({},e,{ref:t}))})),Filter:r.a.forwardRef((function(e,t){return r.a.createElement(Ns.a,Object.assign({},e,{ref:t}))})),FirstPage:r.a.forwardRef((function(e,t){return r.a.createElement(Ms.a,Object.assign({},e,{ref:t}))})),LastPage:r.a.forwardRef((function(e,t){return r.a.createElement(Fs.a,Object.assign({},e,{ref:t}))})),NextPage:r.a.forwardRef((function(e,t){return r.a.createElement(xs.a,Object.assign({},e,{ref:t}))})),PreviousPage:r.a.forwardRef((function(e,t){return r.a.createElement(js.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.a.forwardRef((function(e,t){return r.a.createElement(Is.a,Object.assign({},e,{ref:t}))})),Search:r.a.forwardRef((function(e,t){return r.a.createElement(Ws.a,Object.assign({},e,{ref:t}))})),SortArrow:r.a.forwardRef((function(e,t){return r.a.createElement(Es.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:r.a.forwardRef((function(e,t){return r.a.createElement(Rs.a,Object.assign({},e,{ref:t}))})),ViewColumn:r.a.forwardRef((function(e,t){return r.a.createElement(Gs.a,Object.assign({},e,{ref:t}))}))};function Qs(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}var qs=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onSaveToSkyspace=function(e){a.props.skyapp.skhubId=e.skhubId,a.props.skyapp.skylink=e.skylink,a.props.skyapp.name=e.fileName,a.props.setSkappDetail(a.props.skyapp),null!=a.props.person||a.props.userSession.isSignInPending()?a.setState({saveToSkyspace:!0}):(T.setItem("SKYAPP_DETAIL",JSON.stringify(a.props.skyapp)),function(){var e={redirectTo:"/",manifestPath:"/manifest.json",authOrigin:"",userSession:Y,sendToSignIn:!0,finished:function(e){var t=e.userSession;Vs.props.setUserSession(t),Vs.props.setPersonGetOtherData(t.loadUserData())},appDetails:H};Object(zs.authenticate)(e)}())},a.loadAvailableAction=function(e){return!1===e.savedToSkySpaces?r.a.createElement(Ue.a,{title:"Add to Spaces",arrow:!0},r.a.createElement(Me.a,{onClick:function(){return a.onSaveToSkyspace(e)}},r.a.createElement(Ne.a,{style:{color:x,fontSize:25}}))):r.a.createElement("div",null,e.skyspaces)},a.copyToClipboard=function(e,t){navigator.clipboard.writeText(t),a.setState({openCopySuccess:!0})},a.closeCopySucess=function(){a.setState({openCopySuccess:!1})},a.udpdatePage=function(e){a.setState({page:e})},a.getFilteredHistory=function(){var e=9*(a.state.page-1),t=e+9;return a.props.history.slice(e,t)},a.selectAll=function(e){console.log(e.target.checked)},a.deleteSelectedHistory=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.setLoaderDisplay(!0),t&&a.props.history&&a.props.history.length===t.length?fn(a.props.userSession).then((function(){a.props.fetchHistory(a.props.userSession),a.props.setLoaderDisplay(!1)})):(n=Object(g.a)(a.props.history),r=t.map((function(e){return e.tableData.id})),s=n.filter((function(e){return!r.includes(e.tableData.id)})),dn(a.props.userSession,s).then((function(e){a.props.fetchHistory(a.props.userSession),a.props.setLoaderDisplay(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={page:1,saveToSkyspace:!1,openCopySuccess:!1,columns:[{title:"File Name",field:"fileName",render:function(e){return r.a.createElement("div",null,r.a.createElement("span",{className:"font-weight-bold h6",color:"black"},e.fileName),r.a.createElement("br",null),r.a.createElement(Ue.a,{title:e.skylink,arrow:!0},r.a.createElement("span",null,va()(e.skylink,11,{position:"middle"}))),r.a.createElement(Ue.a,{title:"Copy Skylink to clipboard",arrow:!0},r.a.createElement(Br.a,{onClick:function(t){return a.copyToClipboard(t,e.skylink)},className:"cursor-pointer",style:{color:x,paddingLeft:10},value:e.skylink})),r.a.createElement("br",null),r.a.createElement("font",{color:"primary"},e.contentType,"  ")," | ",r.a.createElement("font",{color:"primary"},e.contentLength&&!isNaN(e.contentLength)&&Er(e.contentLength)," "))}},{title:"Activity Time",field:"timestamp",type:"datetime"},{title:"Activity Type",field:"action"},{title:"Spaces",field:"skyspaces",render:function(e){return e.skyspaces?a.loadAvailableAction(e):"N/A"}}]},a.props.fetchHistory(a.props.userSession),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state.columns;return this.state.saveToSkyspace?r.a.createElement(S.a,{to:"/register"}):r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(w.a,{container:!0,spacing:1},r.a.createElement(w.a,{item:!0,xs:12,sm:12},r.a.createElement(Ss.a,{icons:Zs,title:"Activity History",columns:t,data:this.props.history,options:{selection:!0,sorting:!0,actionsColumnIndex:-1},actions:[{tooltip:"Remove Selected Activity History",icon:Zs.Delete,onClick:function(t,n){e.deleteSelectedHistory(n)}}]}))),r.a.createElement(ie.a,{open:this.state.openCopySuccess,autoHideDuration:4e3,onClose:this.closeCopySucess},r.a.createElement(Qs,{onClose:this.closeCopySucess,severity:"success"},"Skylink successfully copied to clipboard!")))}}]),n}(r.a.Component),Xs=Object(m.a)((function(e){return{formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)}}}))(Object(f.b)((function(e){return{userSession:e.userSession,history:e.snHistory,person:e.person,skyapp:e.snAppDetail}}),(function(e){return Object(Xe.bindActionCreators)({setLoaderDisplay:Ye,fetchHistory:aa,setSkappDetail:Vn},e)}))(qs)),$s=n(522),eo=n(523),to=n(1262),no=n(524),ao=n(429),ro=n.n(ao),so=n(804),oo=n.n(so);var io=n(320),co=n.n(io),lo=n(806),po=n.n(lo),uo=n(805),fo=n.n(uo),ho=function(e){return r.a.createElement(r.a.Fragment,null,!e.isRegister&&e.isAppOwner&&r.a.createElement(xa.a,{variant:"contained",className:"btn-register-pg",color:"secondary",type:"button",onClick:function(t){return e.onDelete(t,"DELETE")},id:"btnDelete",startIcon:r.a.createElement(fo.a,null)},"Delete Skylink"),(e.isRegister||e.edit,e.isAppOwner&&r.a.createElement(xa.a,{variant:"contained",color:"primary",className:"btn-register-pg btn-bg-color",type:"submit",startIcon:r.a.createElement(co.a,null)},"Save")),!e.isRegister&&r.a.createElement(xa.a,{variant:"contained",color:"primary",className:"btn-register-pg btn-bg-color",onClick:function(t){return e.onDone(t)},type:"button",startIcon:r.a.createElement(po.a,null)},"Done"))},mo=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleAddSpaceOpen=function(){a.setState({showAddSkyspace:!0})},a.handleAddSpaceClose=function(){a.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},a.addSkyspace=function(e){e.preventDefault(),e.stopPropagation(),console.log("add skypace clicked"),a.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),a.handleAddSpaceOpen()},a.handleInfoModalClose=function(){a.setState({snInfoModal:{open:!1,title:"",description:"",onClose:function(){}},redirectToAllApps:!0})},a.handleSecretIdDlgClose=function(){a.setState({openSecretIdDlg:!1,redirectToAllApps:!0})},a.handleSkylinkCreationSuccess=function(e){a.props.setLoaderDisplay(!1),a.props.fetchSkyspaceAppCount();var t="updated";a.state.isRegister?t="saved":"DELETE"===e&&(t="deleted");var n={open:!0,title:"Status : Success",description:"Skylink has been "+t+" Successfully.",onClose:a.handleInfoModalClose};a.setState({snInfoModal:n})},a.categorySpecificTask=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r,s,o,i,c,l,p,u,d,f,h,m;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kr(a.props.snUserSetting),r=n+Object(bt.parseSkylink)(t.skylink),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.blob();case 7:o=e.sent,t.contentType=s.headers.get("content-type"),t.contentLength=s.headers.get("content-length"),i=new bt.SkynetClient(n),e.t0=t.type,e.next="pictures"===e.t0?14:"video"===e.t0?34:57;break;case 14:return e.prev=14,e.next=17,re.a.getDataUrlFromFile(o);case 17:return l=e.sent,e.next=20,re.a.getFilefromDataUrl(l,"image");case 20:return p=e.sent,e.next=23,Or(p);case 23:return u=e.sent,e.next=26,Ct(u,i);case 26:c=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(14),console.error("Skyspaces handled exception p",e.t1);case 32:return t.thumbnail=null!=c?Object(bt.parseSkylink)(c):"",e.abrupt("break",58);case 34:if(e.prev=34,!(hr[t.type].fileTypeList.indexOf(t.contentType)>-1)){e.next=50;break}return d=document.querySelector("#hidden-upload-video"),f=null,h=new Promise((function(e){return f=e})),d.src=r,d.onloadeddata=f,d.load(),e.next=44,h;case 44:return e.next=46,vr(d);case 46:return m=e.sent,e.next=49,Ct(m,i);case 49:c=e.sent;case 50:e.next=55;break;case 52:e.prev=52,e.t2=e.catch(34),console.error("Skyspaces handled exception v",e.t2);case 55:return t.thumbnail=null!=c?Object(bt.parseSkylink)(c):"",e.abrupt("break",58);case 57:console.log("default");case 58:case"end":return e.stop()}}),e,null,[[14,29],[34,52]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var r,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=!1,e.t0=E.a.keys(a.props.skyapp);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(s=e.t1.value,a.props.skyapp.hasOwnProperty(s)&&(r=r||a.onSubmitValidateField(s)),!r){e.next=8;break}return e.abrupt("break",10);case 8:e.next=3;break;case 10:if(!r){e.next=12;break}return e.abrupt("return");case 12:if(a.props.setLoaderDisplay(!0),null!=n){e.next=20;break}return e.next=16,a.categorySpecificTask(a.props.skyapp);case 16:o="",zt(a.props.userSession,a.props.skyapp,a.props.person).then((function(e){if(o=a.props.skyapp.skhubId?a.props.skyapp.skhubId:e,null!=a.props.skyapp.skyspaceList){if(a.props.skyapp.skyspaceList.length>0)return an(a.props.userSession,o,a.props.skyapp.skyspaceList)}else null==a.props.skyapp.skyspaceList&&(a.props.skyapp.skyspaceList=[]);if(null!=a.props.snAppSkyspaces&&a.props.snAppSkyspaces.skyspaceForSkhubIdList&&a.props.snAppSkyspaces.skyspaceForSkhubIdListlength>0){var t=a.props.snAppSkyspaces.skyspaceForSkhubIdList.filter((function(e){return!a.props.skyapp.skyspaceList.includes(e)}));if(null!=t&&t.length>0)return nn(a.props.userSession,o,t)}return""})).then((function(){var e={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1};if(e.skhubId=a.props.skyapp.skhubId,e.skylink=a.props.skyapp.skylink,e.fileName=a.props.skyapp.name,e.action="Upload",e.skyspaces=a.props.skyapp.skyspaceList,e.savedToSkySpaces=!!(a.props.skyapp.skyspaceList&&a.props.skyapp.skyspaceList.length>0),a.props.skyapp.contentLength&&a.props.skyapp.contentType)e.contentLength=a.props.skyapp.contentLength,e.contentType=a.props.skyapp.contentType,un(a.props.userSession,e);else{var t=kr(a.props.snUserSetting)+a.props.skyapp.skylink;Ot(t).pipe(Object(it.a)((function(t){return e.contentLength=t.contentLength,e.contentType=t.contentType,a.handleChange(t.contentLength,{key:"contentLength"}),a.handleChange(t.contentType,{key:"contentType"}),e}))).subscribe((function(t){zt(a.props.userSession,a.props.skyapp,a.props.person).then((function(){un(a.props.userSession,e).then((function(){return t}))}))}),(function(e){return e}))}})).then((function(){a.handleSkylinkCreationSuccess()})).catch((function(e){a.props.setLoaderDisplay(!1)})),e.next=21;break;case 20:"DELETE"===n&&Qt(a.props.userSession,a.props.skyapp.skhubId).then((function(){if(null!=a.props.skyapp.skyspaceList){var e=a.props.skyapp.skyspaceList.length,t=0;a.props.skyapp.skyspaceList.forEach((function(n,r){ln(a.props.userSession,n,a.props.skyapp.skhubId).then((function(n){++t===e&&a.handleSkylinkCreationSuccess("DELETE")}))}))}else a.handleSkylinkCreationSuccess("DELETE")}));case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.handleChange=function(e,t){var n=a.props.skyapp;if(null==a.props.snAppSkyspaces||null!=a.props.snAppSkyspaces.isAppOwner&&!1!==a.props.snAppSkyspaces.isAppOwner){var r="";if(null!=t)r=t.key,null!=t.isArray&&!0===t.isArray?!0===t.pop?n[r].remove(e):n[r].push(e):!0===t.isCallback?n[r]=t.callback(n[r],e):n[r]=e;else{var s=e.target.type;n[r=e.target.name]="checkbox"===s?e.target.checked:e.target.value}a.validateField(r)}},a.setTypeFromFile=function(e){var t=mr(),n=Object.keys(t).find((function(n){return t[n].fileTypeList&&t[n].fileTypeList.indexOf(e)>-1}));n&&a.handleChange(n,{key:"type"})},a.onUpload=function(e){a.props.setLoaderDisplay(!0),a.handleChange(e.skylink,{key:"skylink"}),a.handleChange(e.name,{key:"name"}),a.handleChange(e.thumbnail,{key:"thumbnail"}),a.setTypeFromFile(e.fileType);var t={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1};t.skylink=e.skylink,t.fileName=e.title,t.action="Upload",t.savedToSkySpaces=!1,a.props.skyapp.skhubId=Lt("BLOCKSTACK:"+a.props.person.profile.did+":"+e.skylink),t.skhubId=a.props.skyapp.skhubId;var n=kr(a.props.snUserSetting)+e.skylink;Ot(n).pipe(Object(it.a)((function(e){return t.contentLength=e.contentLength,t.contentType=e.contentType,un(a.props.userSession,t).then((function(){a.handleChange(e.contentLength,{key:"contentLength"}),a.handleChange(e.contentType,{key:"contentType"})})),t}))).subscribe((function(e){return console.log("getSkylinkHeader : contentLength : "+e.contentLength),a.props.setLoaderDisplay(!1),e}),(function(e){return a.props.setLoaderDisplay(!1),e}))},a.getSkyspaceListForCarousalMenu=function(){if(null!=a.props.snSkyspaceList){var e={};return a.props.snSkyspaceList.forEach((function(t){e[t]={label:t}})),e}},a.setTypeAutoCompleteValue=function(){var e=yr().filter((function(e){return e.key===a.props.skyapp.type}));return null!=e&&e.length>0?e[0]:null},a.state={showLoader:!1,openSecretIdDlg:!1,redirectToAllApps:!1,edit:!1,isRegister:!1,openEnableEditDlg:!1,isAppOwner:!1,snInfoModal:{open:!1,title:"",description:"",onClose:function(){}},showAddSkyspace:!1,skyspaceModal:{title:"Add New Skyspace",skyspaceName:null,type:"ADD_SKYSPACE"},errorObj:et()},a.handleDoneBtn=a.handleDoneBtn.bind(Object(C.a)(a)),a.handleEditBtn=a.handleEditBtn.bind(Object(C.a)(a)),a}return Object(c.a)(n,[{key:"handleEditBtn",value:function(){this.setState({openEnableEditDlg:!0})}},{key:"handleDoneBtn",value:function(){this.setState({redirectToAllApps:!0})}},{key:"componentDidMount",value:function(){if("/register"===this.props.match.path)this.setState({isRegister:!0,isAppOwner:!0}),this.props.setAppSkyspces({skyspaceForSkhubIdList:[],isAppOwner:!0});else{var e=decodeURIComponent(this.props.match.params.id),t=this.props.match.params.sender;t=t&&decodeURIComponent(t),e,this.setState({isRegister:!1}),this.getSkyAppDetails(e,t)}}},{key:"componentWillUnmount",value:function(){this.props.fetchEmptyApp()}},{key:"getSkyAppDetails",value:function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return this.props.setLoaderDisplay(!0),e.next=4,Nn(this.props.userSession,n,[t]);case 4:return(a=e.sent)&&a.length>0&&this.props.setAppDetail(a[0]),this.props.setLoaderDisplay(!1),e.abrupt("return");case 8:Vt(this.props.userSession).then((function(e){null!=e&&e.skhubIdList.includes(t)&&r.setState({isAppOwner:!0})})).then((function(){r.props.location.search;console.log("tester",null!=r.props.snAppSkyspaces&&r.props.snAppSkyspaces.isAppOwner),r.props.fetchSkyspaceAppDetail({skyAppId:t,session:r.props.userSession})}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,n){if("/register"!==this.props.match.path){var a=this.props.match.params,r=a.id;a.sender;r,this.state.isRegister&&this.setState({isRegister:!1})}else this.state.isRegister||(this.setState({isRegister:!0,isAppOwner:!0}),this.props.setAppSkyspces({skyspaceForSkhubIdList:[],isAppOwner:!0}),this.props.fetchEmptyApp(),this.props.setAppSkyspces([]))}},{key:"onSubmitValidateField",value:function(e){var t=this.state.errorObj,n=this.props.skyapp[e],a=!1;if(null!=this.props.snAppSkyspaces&&!0===this.props.snAppSkyspaces.isAppOwner)switch(e){case"skylink":try{Object(bt.parseSkylink)(n)}catch(r){t[e]=!0,t[e+".errorMsg"]=r,a=!0}break;case"skyspaceList":try{n&&n.length>0||(t[e]=!0,t[e+".errorMsg"]="please select atleast one Space for this Skylink. Its mandatory field.",a=!0)}catch(r){t[e]=!0,t[e+".errorMsg"]=r,a=!0}break;case"name":case"type":t[e]=null==n||""===n.trim(),a=t[e]}return this.setState({errorObj:t}),a}},{key:"validateField",value:function(e){var t=this.state.errorObj,n=this.props.skyapp[e],a=!1;if(null!=this.props.snAppSkyspaces&&!0===this.props.snAppSkyspaces.isAppOwner)switch(e){case"name":case"skylink":case"type":t[e]=null==n||""===n.trim(),a=t[e]}return this.setState({errorObj:t}),a}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.showLoader,s=n.redirectToAllApps,o=n.isRegister,i=n.edit,c=n.errorObj,l=this.props.skyapp;null!=this.props.snAppSkyspaces&&this.props.snAppSkyspaces.isAppOwner;return s?r.a.createElement(S.a,{to:"/history"}):a?r.a.createElement("div",{className:"loader"}):r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(Ua.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onError:function(e){return console.log(e)}},r.a.createElement(w.a,{container:!0,spacing:1},r.a.createElement("video",{src:"",muted:!0,controls:!0,crossOrigin:"anonymous",loop:!0,className:"d-none",id:"hidden-upload-video"}),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"skylink",name:"skylink",label:"Skylink URL",error:c.skylink,fullWidth:!0,value:l.skylink,autoComplete:"off",helperText:"Please provide 46 character skylink."+(c.skylink&&""!==c["skylink.errorMsg"]?"Details:"+c["skylink.errorMsg"]:""),onInput:function(e){e.target.value=e.target.value.slice(0,200)},onChange:this.handleChange})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"name",name:"name",label:"File Name"+(l.bookmark||l.permission?"*":""),fullWidth:!0,error:c.name,value:l.name,autoComplete:"off",onChange:this.handleChange,helperText:c.name?"File name is a mandatory field.":"Max 200 characters. "+(l.bookmark||l.permission?"This is a mandatory field.":""),onInput:function(e){e.target.value=e.target.value.slice(0,200)}})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement($s.a,{className:"full-width",error:c.description},r.a.createElement(to.a,{rowsMin:4,"aria-label":"maximum height",name:"description",label:"Description*",placeholder:"Description",value:l.description,autoComplete:"off",onInput:function(e){e.target.value=e.target.value.slice(0,500)},onChange:this.handleChange}),r.a.createElement(no.a,null,"Max 500 characters. "+(c.name?"This is a mandatory field.":"")))),r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"select-grid"},r.a.createElement($s.a,{className:t.formControl,error:c.skyspaceList},r.a.createElement(eo.a,{className:"carousal-label"},"SkySpace"+(l.bookmark||l.permission?"*":"")),r.a.createElement("div",{className:"skapp-skyspace-ctrl"},null!=this.props.snSkyspaceList&&this.props.snSkyspaceList.length>0?r.a.createElement(Ma,{selectedItems:null!=this.props.snAppSkyspacesToChange&&null!=this.props.snAppSkyspacesToChange.skyspaceForSkhubIdList?this.props.snAppSkyspacesToChange.skyspaceForSkhubIdList:[],itemsObj:this.getSkyspaceListForCarousalMenu(),labelKey:"label",onUpdate:function(t){return e.handleChange(t,{key:"skyspaceList"})}}):r.a.createElement(w.a,{item:!0,xs:12,sm:10,justify:"flex-start"},r.a.createElement(Ue.a,{title:"Create New Space",arrow:!0},r.a.createElement(Me.a,{onClick:this.addSkyspace,justify:"flex-start"},r.a.createElement(Ne.a,{style:{color:x,fontSize:25}}))))),r.a.createElement(no.a,null,"Please select atleast one Space (mandatory field)"+(l.permission?"This is a mandatory field.":"")))),r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"select-grid"},r.a.createElement($s.a,{className:t.formControl,error:c.tags},r.a.createElement(ro.a,{value:l.tags,onAdd:function(t){return e.handleChange(t,{key:"tags",isArray:!0})},onDelete:function(t,n){e.handleChange(t,{key:"tags",isCallback:!0,callback:function(e,t){return e.splice(t,1),e}})}}),r.a.createElement(no.a,null,"Please select tags. "+(l.permission?"This is a mandatory field.":"")))),r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"select-grid"},r.a.createElement($s.a,{className:t.formControl,error:c.type},r.a.createElement(Ba.a,{options:yr(),getOptionLabel:function(e){return e.label},value:this.setTypeAutoCompleteValue(),name:"type",onChange:function(t,n){e.handleChange(null==n?null:n.key,{key:"type"})},renderInput:function(e){return r.a.createElement(Aa.a,Object.assign({},e,{label:"Category",margin:"normal"}))}}),r.a.createElement(no.a,null,"Please select category. This is a mandatory field."))),2===l.category&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"git_url",name:"git_url",label:"Github/GitLab URL",fullWidth:!0,value:l.git_url,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"demo_url",name:"demo_url",label:"Demo URL",fullWidth:!0,value:l.demo_url,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"developer",name:"developer",label:"Developed By",fullWidth:!0,value:l.developer,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"appStatus",name:"appStatus",label:"App Status",fullWidth:!0,value:l.appStatus,autoComplete:"off",onChange:this.handleChange})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"support",name:"support",label:"Support",fullWidth:!0,value:l.support,autoComplete:"off",onChange:this.handleChange}))),r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:oo()({"button-grid":!0})},r.a.createElement(ho,{isRegister:o,isAppOwner:null!=this.props.snAppSkyspaces&&this.props.snAppSkyspaces.isAppOwner,edit:i,onDelete:this.handleSubmit,onEdit:this.handleEditBtn,onDone:this.handleDoneBtn})))),r.a.createElement(Gr,{open:this.state.snInfoModal.open,onClose:this.state.snInfoModal.onClose,title:this.state.snInfoModal.title,content:this.state.snInfoModal.description}),r.a.createElement(Ha,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleAddSpaceOpen,handleClose:this.handleAddSpaceClose,type:this.state.skyspaceModal.type}))}}]),n}(r.a.Component),yo=Object(m.a)((function(e){return{formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)}}}))(Object(f.b)((function(e){return{isShowing:e.snLoader,skyapp:e.snAppDetail,userSession:e.userSession,person:e.person,snSkyspaceList:e.snSkyspaceList,snInfoModalState:e.snInfoModalState,snAppSkyspaces:e.snAppSkyspaceList,snUserSetting:e.snUserSetting,snAppSkyspacesToChange:JSON.parse(JSON.stringify(e.snAppSkyspaceList))}}),(function(e){return Object(Xe.bindActionCreators)({setLoaderDisplay:Ye,fetchAppDetail:Bn,fetchSkyspaceAppDetail:Yn,fetchEmptyApp:Wn,createSkapp:zn,setInfoModalState:Rn,setAppSkyspces:Hn,fetchSkyspaceAppCount:ya,setAppDetail:Gn},e)}))(mo)),ko=n(807),So=n.n(ko),bo=n(808),go=n.n(bo),vo=n(532),Eo=n(710),Oo=n(1314),Co=n(719),wo=n(711),jo=n(431),Ao=n.n(jo),xo=n(809),To=n.n(xo),Io=n(430),Po=n.n(Io),Lo=n(379),Do=function(e){return null==e?T.removeItem("USER_SESSION"):(e.skydbseed||e.skyid)&&T.setItem("USER_SESSION",JSON.stringify(e)),{type:"SET_USER_SESSION",payload:e}},No=function(e){return{type:"SET_IMPORTED_SPACE",payload:e}};function _o(e){return Object(Xe.bindActionCreators)({setMobileMenuDisplay:Fa,toggleMobileMenuDisplay:Ka,fetchBlockstackPerson:ta,logoutPerson:na,toggleDesktopMenuDisplay:er,setUserSession:Do,setPerson:$n,setPersonGetOtherData:ea,fetchPublicApps:ut,setLoaderDisplay:Ye,fetchAppsSuccess:dt,setApps:ft,setImportedSpace:No},e)}function Mo(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,snPortalsList:e.snPortalsList,snApps:e.snApps,person:e.person,triggerSignIn:e.snTriggerSignin,snUserSetting:e.snUserSetting,snTopbarDisplay:e.snTopbarDisplay,snShowDesktopMenu:e.snShowDesktopMenu,snPublicHash:e.snPublicHash,snPublicInMemory:e.snPublicInMemory}}var Uo=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).gotoSkydbLogin=function(){var e=a.getPublicToAccHash(),t="";e&&(t="?sharedhash="+e),a.props.history.push("/login"+t)},a.doSignIn=function(){var e=a.getPublicToAccHash();if(e){var t="?sharedhash="+e;a.props.history.push("/upload"+t)}var n={redirectTo:"/",manifestPath:"/manifest.json",authOrigin:"",userSession:Y,sendToSignIn:!0,finished:function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userSession,a.props.setUserSession(n),On(n),e.next=5,Pn(n,{isImport:!0});case 5:r=e.sent,a.props.setImportedSpace(r),a.props.setPersonGetOtherData(n.loadUserData());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),appDetails:H};Object(zs.authenticate)(n)},a.doSignUp=function(){var e=a.getPublicToAccHash();if(e){var t="?sharedhash="+e;a.props.history.push("/upload"+t)}var n={redirectTo:"/",manifestPath:"/manifest.json",authOrigin:"",userSession:Y,finished:function(e){var t=e.userSession;a.props.setUserSession(t),a.props.setPersonGetOtherData(t.loadUserData())},appDetails:H};Object(zs.showBlockstackConnect)(n)},a.getPublicToAccHash=function(){return new URLSearchParams(a.props.location.search).get("sharedhash")},a.handleClick=function(e){a.setState({anchorEl:null==e?null:e.currentTarget})},a.logout=function(){a.props.logoutPerson(a.props.userSession),a.handleClick()},a.handleSettings=function(){a.handleClick(),a.props.history.push("/settings")},a.onDownload=function(){console.log("topbar download button clicked")},a.clearAllStorage=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,En(a.props.userSession);case 3:localStorage.clear(),a.props.setLoaderDisplay(!0),a.logout();case 6:case"end":return e.stop()}}),e)}))),a.showSkydbPublicKey=function(){a.handleClick(),a.setState({showInfoModal:!0,infoModalContent:a.props.person.appPublicKey})},a.state={anchorEl:null,showInfoModal:!1,onInfoModalClose:function(){return a.setState({showInfoModal:!1})},infoModalContent:"public"},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,s,o,i=this;return r.a.createElement(r.a.Fragment,null,null==this.props.person&&r.a.createElement(r.a.Fragment,null),this.props.person&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{title:"Welcome "+(null===(e=this.props.person)||void 0===e||null===(t=e.profile)||void 0===t||null===(n=t.username)||void 0===n?void 0:n.replace(".id.blockstack",""))+" !"},r.a.createElement(Rr.a,{alt:"Remy Sharp",src:"",className:"app-bg-color cursor-pointer","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return i.handleClick(e)}},null===(a=this.props.person)||void 0===a||null===(s=a.profile)||void 0===s||null===(o=s.username)||void 0===o?void 0:o.charAt(0).toUpperCase())),r.a.createElement(Lo.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:function(){return i.handleClick()},className:"avatar-menu"},r.a.createElement("div",{style:{color:x,fontWeight:"bold"}}),r.a.createElement(Eo.a,{onClick:function(){return i.handleSettings()}},"Settings"),("SKYDB_ID"===jr(this.props.userSession)||"SKYID"===jr(this.props.userSession))&&r.a.createElement(Eo.a,{onClick:function(){return i.showSkydbPublicKey()}},"Show Public Key"),!1,r.a.createElement(Eo.a,{onClick:this.logout},"Logout"))),r.a.createElement(Gr,{open:this.state.showInfoModal,onClose:this.state.onInfoModalClose,title:"Skydb Public Key",showClipboardCopy:!0,clipboardCopyTooltip:"Copy Public Key To Clipboard",content:this.state.infoModalContent}))}}]),n}(r.a.Component),Fo=Object(f.b)(Mo,_o)(Object(S.h)(Uo));function Ko(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}var Ro=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getSkylinkIdxObject=function(e){var t;e.preventDefault(),e.stopPropagation(),(t=a.props.userSession,Rt(t,N).then((function(e){return e}))).then((function(e){Zt(a.props.userSession,e.skhubIdList[1])}))},a.triggerSearch=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),null==a.props.snPublicHash){e.next=18;break}if(null!=a.state.searchStr&&""!==a.state.searchStr.trim()){e.next=10;break}return e.next=6,wt(a.props.snPublicHash);case 6:n=e.sent,a.props.setApps(wr(n.data,a.props.snPublicInMemory.addedSkapps,a.props.snPublicInMemory.deletedSkapps)),e.next=16;break;case 10:return a.props.setLoaderDisplay(!0),e.next=13,wt(a.props.snPublicHash);case 13:r=e.sent,s=wr(r.data,a.props.snPublicInMemory.addedSkapps,a.props.snPublicInMemory.deletedSkapps).filter((function(e){if(!a.state.searchStr||""===a.state.searchStr.trim())return e;for(var t in e)if(e.hasOwnProperty(t)&&"category"!==t&&null!=e[t]&&e[t].toString().toLowerCase().indexOf(a.state.searchStr.toLowerCase())>-1)return e;return""})),a.props.fetchAppsSuccess(s);case 16:e.next=19;break;case 18:a.props.history.push("/skylinks?query="+encodeURIComponent(a.state.searchStr));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onDownload=function(){try{var e=Object(bt.parseSkylink)(a.state.searchStr);br(e,a.props.snUserSetting)}catch(t){a.setState({invalidSkylink:!0})}},a.changePublicPortal=function(e){document.location.href=document.location.href.replace(document.location.origin,new URL(e).origin)},a.handleLogoClick=function(e){a.props.snPublicHash&&e.preventDefault()},a.renderChangePortal=function(e){return r.a.createElement($s.a,{className:a.props.classes.portalFormControl},r.a.createElement(vo.a,{labelId:"demo-simple-select-label",id:"pulic-share-portal",value:e,onChange:function(e){return a.changePublicPortal(e.target.value)}},r.a.createElement(Eo.a,{className:"d-none",value:e},"Change Portal"),document.location.origin.indexOf("localhost")>-1&&r.a.createElement(Eo.a,{value:document.location.origin},document.location.origin),a.props.snPortalsList&&a.props.snPortalsList.portals.map((function(e,t){return r.a.createElement(Eo.a,{key:t,value:e.url},e.name)}))))},a.state={searchStr:"",invalidSkylink:!1,publicPortal:P,showInfoModal:!1,infoModalContent:"",onInfoModalClose:function(){return a.setState({showInfoModal:!1})}},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oo.a,{position:"fixed",className:t.appBar+" topbar-container",color:"inherit"},r.a.createElement(wo.a,{className:Object(Te.default)({"d-none":!this.props.snTopbarDisplay})},r.a.createElement(w.a,{container:!0,spacing:1,alignItems:"center"},this.props.snShowDesktopMenu&&r.a.createElement(w.a,{item:!0,xs:1,sm:2,className:"hidden-sm-up center-flex-div-content"},r.a.createElement(To.a,{onClick:this.props.toggleMobileMenuDisplay})),r.a.createElement(w.a,{item:!0,xs:1,sm:2,className:"p-top10"},r.a.createElement("div",{className:"ribbon hidden-xs-dn"},r.a.createElement("span",null,"BETA")),r.a.createElement(k.b,{className:"sm-up-logo",to:"/",onClick:this.handleLogoClick},r.a.createElement("img",{src:So.a,alt:"SkySpaces",className:"cursor-pointer hidden-xs-dn",height:"40",width:"170"}),r.a.createElement("img",{src:go.a,alt:"SkySpaces",className:"cursor-pointer hidden-sm-up",height:"30",width:"30"}))),(null!=this.props.person||this.props.snPublicHash)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:7,sm:7,className:"topbar-srch-grid"},r.a.createElement("div",{className:"float-center"},r.a.createElement("form",{onSubmit:this.triggerSearch},r.a.createElement(Aa.a,{id:"filled-secondary",name:"searchKey",autoComplete:"off",variant:"outlined",className:"topbar-search-field",placeholder:"Search in Spaces or Download Skylink",onChange:function(t){return e.setState({searchStr:t.target.value})},InputProps:{startAdornment:r.a.createElement(Co.a,{position:"start"},r.a.createElement(Ws.a,null))}})))),r.a.createElement(w.a,{item:!0,xs:this.props.snPublicHash?2:1,sm:this.props.snPublicHash?2:1},r.a.createElement(Ue.a,{title:"Download Skylink Content",arrow:!0},r.a.createElement(Po.a,{style:{color:x,fontSize:35,cursor:"pointer"},onClick:this.onDownload})))),r.a.createElement(w.a,{item:!0,sm:null!=this.props.person?2:null!=this.props.snPublicHash?1:10,className:"hidden-xs-dn"},r.a.createElement("div",{className:"top-icon-container float-right"},r.a.createElement(qe.a,{justify:"center",rel:"noopener noreferrer",target:"_blank",href:"https://blog.sia.tech/own-your-space-eae33a2dbbbc",style:{color:x}},"Blog"),r.a.createElement(Ue.a,{title:"Launch SkyApps",arrow:!0},r.a.createElement(Me.a,{onClick:function(){return window.open("https://skyapps.hns.siasky.net")}},r.a.createElement(Ao.a,{style:{color:x}}))),!this.props.snShowDesktopMenu&&this.renderChangePortal("Change Portal"),this.props.snShowDesktopMenu&&r.a.createElement(Fo,null))),r.a.createElement(w.a,{item:!0,xs:null!=this.props.person||null!=this.props.snPublicHash?2:10,className:"hidden-sm-up"},r.a.createElement("div",{className:"top-icon-container float-right"},this.props.snShowDesktopMenu&&r.a.createElement(Fo,null),this.renderChangePortal("")))))),r.a.createElement(ie.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.invalidSkylink,autoHideDuration:3e3,onClose:function(){return e.setState({invalidSkylink:!1})},TransitionComponent:"Fade"},r.a.createElement(Ko,{onClose:function(){return e.setState({invalidSkylink:!1})},severity:"error"},"Invalid Skylink ! Please enter valid 46 character skylink to Download.")),r.a.createElement(Gr,{open:this.state.showInfoModal,onClose:this.state.onInfoModalClose,title:"Public Share Link",type:"public-share",content:this.state.infoModalContent}))}}]),n}(r.a.Component),Ho=Object(S.h)(Object(m.a)((function(e){return{root:{display:"flex"},portalFormControl:{marginBottom:10},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},menuButton:Object(V.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}))(Object(f.b)(Mo,_o)(Ro))),Bo=n(768),Yo=n(135),Wo=n(1267),Jo=n(817),Go=n.n(Jo),zo=n(1272),Vo=n(818),Zo=n.n(Vo),Qo=n(1317),qo=n(810),Xo=n.n(qo),$o=n(721),ei=n(816),ti=n.n(ei),ni=n(1316),ai=n(813),ri=n.n(ai),si=n(228),oi=n.n(si),ii=n(1265),ci=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Object.assign({direction:"up",ref:t},e))}));var li=Object(Be.a)((function(e){return{typography:{padding:e.spacing(1)}}}));function pi(e){var t=li(),n=Object(f.c)(),s=Object(a.useState)(null),o=Object(Z.a)(s,2),i=o[0],c=o[1],l=Object(a.useState)(!1),p=Object(Z.a)(l,2),u=p[0],d=p[1],h=Object(a.useState)(null),m=Object(Z.a)(h,2),y=m[0],k=m[1],S=Object(a.useState)([]),b=Object(Z.a)(S,2),v=b[0],C=b[1],j=Object(f.d)((function(e){return e.userSession}));Object(a.useEffect)((function(){c(""),C([])}),[e.open]);var A=function(){var t=Object(O.a)(E.a.mark((function t(){var n,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],a={},v.forEach((function(t){var r=e.sharedWithObj[t].spaces.indexOf(e.skyspaceName);e.sharedWithObj[t].spaces.splice(r,1),0===e.sharedWithObj[t].spaces.length||(a[t]=[],e.sharedWithObj[t].spaces.forEach((function(e){n.push(on(j,e).then((function(e){a[t]=[].concat(Object(g.a)(a[t]),Object(g.a)(e.skhubIdList))})))})))})),t.next=5,Promise.all(n);case 5:return n.length=0,v.forEach((function(t){if(a[t]){var r=Object(g.a)(new Set(Object(g.a)(a[t])));e.sharedWithObj[t].skylinks=e.sharedWithObj[t].skylinks.filter((function(e){return r.indexOf(e)>-1})),n.push(_n(j,t,e.sharedWithObj[t].skylinks,e.sharedWithObj))}})),n.push(wn(e.userSession,e.sharedWithObj)),t.next=10,Promise.all(n);case 10:return t.next=12,Un(e.userSession,v,e.skyspaceName,e.sharedWithObj);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(O.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n(Ye(!0)),!(v.length>0)){t.next=5;break}return t.next=5,A();case 5:if(!i||""===i.trim()){t.next=8;break}return t.next=8,Fn(e.userSession,[e.skyspaceName],i,e.sharedWithObj);case 8:n(Ye(!1)),e.onNo(),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),n(Ye(!1)),C([]),d(!0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{open:e.open,onClose:e.onNo,TransitionComponent:ci,keepMounted:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ja.a,{id:"alert-dialog-title"},e.title),r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},e.content),r.a.createElement(w.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(r.a.Fragment,null,e.sharedWithObj&&Object.keys(e.sharedWithObj).filter((function(e){return-1===v.indexOf(e)})).filter((function(t){return e.sharedWithObj[t].spaces.indexOf(e.skyspaceName)>-1})).map((function(t,n){return r.a.createElement(Ue.a,{title:e.sharedWithObj[t].userid,arrow:!0},r.a.createElement(Le.a,{key:n,label:va()(e.sharedWithObj[t].userid,30),onDelete:function(){return function(e){return C([].concat(Object(g.a)(v),[e]))}(t)},color:"primary",variant:"outlined"}))})),r.a.createElement(Aa.a,{id:"recipientId",name:"recipientId",label:"Recipient Id",fullWidth:!0,value:i,autoComplete:"off",helperText:"Please enter recipient blockstack ID.",onChange:function(e){k(e.target),c(e.target.value)}}),r.a.createElement(ii.a,{id:"id",open:u,anchorEl:y,onClose:function(){return d(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(Ja.a,{className:t.typography},"The user has not created an account with Skyspaces!")))))),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(oi.a,null)},"Cancel"),r.a.createElement(xa.a,{onClick:function(e){return x()},autoFocus:!0,disabled:(null==i||""===i.trim())&&0===v.length,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement(Wr.a,null)},"OK"))))}var ui=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Object.assign({direction:"up",ref:t},e))}));function di(e){return r.a.createElement(Ea.a,{open:e.open,onClose:e.onNo,TransitionComponent:ui,keepMounted:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ja.a,{id:"alert-dialog-title"},e.title),r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},e.content)),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(oi.a,null)},"Cancel"),r.a.createElement(xa.a,{onClick:e.onYes,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement(Wr.a,null)},"OK")))}var fi=n(539),hi=n.n(fi),mi=n(811),yi=n.n(mi),ki=n(540),Si=n.n(ki),bi=n(538),gi=n.n(bi),vi=n(814),Ei=n.n(vi),Oi=n(812),Ci=n.n(Oi);var wi=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Object.assign({direction:"up",ref:t},e))}));var ji=Object(Be.a)((function(e){return{typography:{padding:e.spacing(1)}}})),Ai=function(e){ji();var t=Object(f.c)(),n=Object(a.useState)(null),s=Object(Z.a)(n,2),o=s[0],i=s[1],c=Object(f.d)((function(e){return e.userSession})),l=function(){var n=Object(O.a)(E.a.mark((function n(){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(Ye(!0)),n.next=3,jn(c,[o]);case 3:a=n.sent,t(No(a)),t(Ye(!1)),i(""),e.onNo();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement(Ea.a,{open:e.open,onClose:e.onNo,TransitionComponent:wi,keepMounted:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ja.a,{id:"alert-dialog-title"},"Import Shared Space"),r.a.createElement(Ca.a,null,r.a.createElement(wa.a,{id:"alert-dialog-description"},"Please enter the user-id of the user who has shared a space with you"),r.a.createElement(Aa.a,{id:"recipientId",name:"recipientId",label:"User Id",fullWidth:!0,value:o,autoComplete:"off",helperText:"Please enter User ID.",onChange:function(e){return i(e.target.value)}})),r.a.createElement(Oa.a,null,r.a.createElement(xa.a,{onClick:e.onNo,autoFocus:!0,variant:"contained",color:"secondary",className:"btn-bg-color",startIcon:r.a.createElement(oi.a,null)},"Cancel"),r.a.createElement(xa.a,{onClick:l,autoFocus:!0,variant:"contained",color:"primary",className:"btn-bg-color",startIcon:r.a.createElement(Wr.a,null)},"OK")))},xi=n(1311),Ti=n(1313),Ii=n(1312),Pi=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).importSharedSpace=function(){a.setState({showImportSkyspaceModal:!0})},a.handleClickOpen=function(){a.setState({showAddSkyspace:!0})},a.handleClose=function(){a.setState({showAddSkyspace:!1,skyspaceModal:{title:"",skyspaceName:"",type:""}})},a.renameSkySpace=function(e,t){e.preventDefault(),e.stopPropagation(),console.log("renameSkySpace before open modal",t,window.location),a.setState({skyspaceModal:{title:"Rename Skyspace",skyspaceName:t,type:"RENAME_SKYSPACE"}}),a.handleClickOpen()},a.addSkyspace=function(e){e.preventDefault(),e.stopPropagation(),console.log("add skypace clicked"),a.setState({skyspaceModal:{title:"Add New Skyspace",skyspaceName:"",type:"ADD_SKYSPACE"}}),a.handleClickOpen()},a.deleteSkyspace=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,Xt(a.props.userSession,t,!0);case 3:a.props.fetchSkyspaceList(),a.props.fetchSkyspaceDetail(),a.props.setLoaderDisplay(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getSkyspace=function(e,t){e.preventDefault(),e.stopPropagation(),sn(a.props.userSession,t)},a.refreshSkyspace=function(e){e.preventDefault(),e.stopPropagation(),a.props.fetchSkyspaceList(),a.props.fetchSkyspaceAppCount()},a.addDummySkyspace=function(e){e.preventDefault(),e.stopPropagation(),Ht(a.props.userSession,"skhub/skyspaces/dummy.json",{props:"1"}).then((function(e){return e})).catch((function(e){}))},a.removeDummySkyspace=function(e){e.preventDefault(),e.stopPropagation(),Wt(a.props.userSession,"skhub/skyspaces/dummy.json").then((function(e){return e})).catch((function(e){}))},a.onDelete=function(e,t){e.preventDefault(),e.stopPropagation(),a.setState({showConfModal:!0,skyspaceToDel:t,confModalDescription:"This action will permanently remove your "+t+" skyspace. Do you want to continue?"})},a.launchShareModal=function(){var e=Object(O.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),a.props.setLoaderDisplay(!0),e.next=5,Cn(a.props.userSession);case 5:r=e.sent,a.props.setLoaderDisplay(!1),a.setState({showShareSkyspaceModal:!0,skyspaceToShare:n,sharedWithObj:r});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.state={showAddSkyspace:!1,sharedWithObj:null,showConfModal:!1,showShareSkyspaceModal:!1,confModalDescription:null,skyspaceToDel:null,skyspaceToShare:null,showImportSkyspaceModal:!1,skyspaceModal:{title:"Add New Skyspace",skyspaceName:null,type:"ADD_SKYSPACE"}},a}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(zo.a,{button:!0,component:"a",className:"nav-link dummy-link"},r.a.createElement(Qo.a,null,r.a.createElement(gi.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"Spaces"}),r.a.createElement(Ue.a,{title:"Refresh Space List",arrow:!0},r.a.createElement(yi.a,{style:{color:x},onClick:this.refreshSkyspace})),r.a.createElement(Ue.a,{title:"Add New Space",arrow:!0},r.a.createElement(hi.a,{style:{color:x},onClick:this.addSkyspace}))),null!=this.props.skyspaceList&&r.a.createElement(Qe.a,{variant:"outlined",className:"skyspace-menu-card"},this.props.skyspaceList.map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(k.b,{activeClassName:"active",className:"nav-link",onClick:function(){return n.props.isMobile&&n.props.toggleMobileMenuDisplay()},to:"/skyspace/"+e},r.a.createElement(zo.a,{button:!0},r.a.createElement(Si.a,{style:{color:x}}),r.a.createElement($o.a,{primary:e,style:{color:x}}),r.a.createElement("span",{className:"app-color"},"(",n.props.snSkyspaceAppCount&&n.props.snSkyspaceAppCount[e],")"),r.a.createElement(Pe.a,{style:{color:x},onClick:function(t){return n.renameSkySpace(t,e)}}),r.a.createElement(Ci.a,{color:"secondary",onClick:function(t){return n.onDelete(t,e)}}),n.props.snSkyspaceAppCount&&0!==n.props.snSkyspaceAppCount[e]&&r.a.createElement(ri.a,{style:{color:x},onClick:function(t){return n.launchShareModal(t,e)}}))))}))),r.a.createElement(ni.a,{className:"skyspace-menu-divider",component:"div"}),r.a.createElement(zo.a,{button:!0,component:"a",className:"nav-link dummy-link"},r.a.createElement(Qo.a,null,r.a.createElement(gi.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"Imported Spaces"}),r.a.createElement(Ue.a,{title:"Import Spaces From Other Users",arrow:!0},r.a.createElement(hi.a,{style:{color:x},onClick:this.importSharedSpace}))),null===(e=this.props.snImportedSpace)||void 0===e||null===(t=e.sharedByUserList)||void 0===t?void 0:t.filter((function(e){var t,a;return(null===(t=n.props.snImportedSpace)||void 0===t||null===(a=t.senderToSpacesMap[e])||void 0===a?void 0:a.skyspaceList.length)>0})).map((function(e){var t,a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xi.a,null,r.a.createElement(Ue.a,{title:e},r.a.createElement(Ti.a,{expandIcon:r.a.createElement(Ei.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(Ja.a,null,va()(e,20)))),null===(t=n.props.snImportedSpace)||void 0===t||null===(a=t.senderToSpacesMap[e])||void 0===a?void 0:a.skyspaceList.map((function(t){return r.a.createElement(Ii.a,{key:t},r.a.createElement(k.b,{activeClassName:"active",className:"imported-space-nav-link",onClick:function(){return n.props.isMobile&&n.props.toggleMobileMenuDisplay()},to:"/imported-spaces/"+encodeURIComponent(e)+"/"+t},r.a.createElement(zo.a,{button:!0},r.a.createElement(Si.a,{style:{color:x}}),r.a.createElement($o.a,{primary:t,style:{color:x}}))))}))))})),r.a.createElement(Ha,{open:this.state.showAddSkyspace,title:this.state.skyspaceModal.title,skyspaceName:this.state.skyspaceModal.skyspaceName,handleClickOpen:this.handleClickOpen,handleClose:this.handleClose,type:this.state.skyspaceModal.type}),r.a.createElement(di,{open:this.state.showConfModal,onYes:function(){n.setState({showConfModal:!1}),n.deleteSkyspace(n.state.skyspaceToDel)},onNo:function(){return n.setState({showConfModal:!1})},title:"Warning!",content:this.state.confModalDescription}),r.a.createElement(pi,{open:this.state.showShareSkyspaceModal,onYes:function(){n.setState({showShareSkyspaceModal:!1})},skyspaceName:this.state.skyspaceToShare,userSession:this.props.userSession,onNo:function(){return n.setState({showShareSkyspaceModal:!1})},title:"Share Skyspace: ".concat(this.state.skyspaceToShare),content:this.state.confModalDescription,sharedWithObj:this.state.sharedWithObj}),r.a.createElement(Ai,{open:this.state.showImportSkyspaceModal,onYes:function(){n.setState({showImportSkyspaceModal:!1})},userSession:this.props.userSession,onNo:function(){return n.setState({showImportSkyspaceModal:!1})},title:"Import Shared Space"}))}}]),n}(r.a.Component),Li=Object(f.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,userSession:e.userSession,skyspaceList:e.snSkyspaceList,person:e.person,snSkyspaceAppCount:e.snSkyspaceAppCount,snImportedSpace:e.snImportedSpace}}),(function(e){return Object(Xe.bindActionCreators)({setMobileMenuDisplay:Fa,toggleMobileMenuDisplay:Ka,fetchSkyspaceList:Xn,setLoaderDisplay:Ye,setSkyspaceList:qn,fetchSkyspaceAppCount:ya,fetchSkyspaceDetail:Qn},e)}))(Pi),Di=n(815),Ni=n.n(Di);var _i=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).menuBar=a.menuBar.bind(Object(C.a)(a)),a}return Object(c.a)(n,[{key:"menuBar",value:function(e,t){var n=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.toolbar},r.a.createElement("div",{className:"banner-text hidden-sm-up"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("span",null,"BETA")),r.a.createElement("img",{src:Xo.a,alt:"SkySpaces",className:"cursor-pointer hidden-sm-up center",height:"40",width:"170"}))),r.a.createElement(Wo.a,{className:"left-menu-list-root"},r.a.createElement(zo.a,{className:"appstore-mobile-link hidden-sm-up"},r.a.createElement($o.a,null,r.a.createElement(qe.a,{rel:"noopener noreferrer",target:"_blank",href:"https://blog.sia.tech/own-your-space-eae33a2dbbbc",style:{color:x}},"Blog"))),r.a.createElement(zo.a,{button:!0,className:"appstore-mobile-link hidden-sm-up",onClick:function(){n.props.toggleMobileMenuDisplay(),window.open("https://skyapps.hns.siasky.net")}},r.a.createElement(Qo.a,null,r.a.createElement(Ao.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"SkyApps"})),null!=this.props.person&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{activeClassName:"active",className:"nav-link",onClick:function(){return t&&n.props.toggleMobileMenuDisplay()},to:"/upload"},r.a.createElement(zo.a,{button:!0},r.a.createElement(Qo.a,null,r.a.createElement(ti.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"Upload"}))),r.a.createElement(k.b,{activeClassName:"active",className:"nav-link",onClick:function(){return t&&n.props.toggleMobileMenuDisplay()},to:"/register"},r.a.createElement(zo.a,{button:!0},r.a.createElement(Qo.a,null,r.a.createElement(Go.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"Add Skylink"}))),r.a.createElement(k.b,{activeClassName:"active",className:"nav-link",onClick:function(){return t&&n.props.toggleMobileMenuDisplay()},to:"/history"},r.a.createElement(zo.a,{button:!0},r.a.createElement(Qo.a,null,r.a.createElement(Zo.a,{style:{color:x}})),r.a.createElement($o.a,{style:{color:x},primary:"Activity History"})))),r.a.createElement(r.a.Fragment,null,null!=this.props.person&&r.a.createElement(Li,{isMobile:t,toggleMobileMenuDisplay:this.toggleMobileMenuDisplay}))),r.a.createElement("div",{className:"fixfooter"},r.a.createElement("div",{className:e.FooterText},"\xa9 2020 SkySpaces"),r.a.createElement("a",{href:"https://sia.tech/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:Ni.a,alt:"Built With Sia",height:"50",width:"50"}))))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bo.a,{smUp:!0,implementation:"css"},r.a.createElement(Yo.a,{variant:"temporary",anchor:"rtl"===this.props.theme.direction?"right":"left",open:this.props.showMobileMenu,onClose:this.props.toggleMobileMenuDisplay,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},this.menuBar(e,!0))),this.props.showDesktopMenu&&r.a.createElement(Bo.a,{xsDown:!0,implementation:"css"},r.a.createElement(Yo.a,{className:e.drawer,variant:"persistent",anchor:"left",open:this.props.showDesktopMenu,classes:{paper:e.drawerPaper}},this.menuBar(e))))}}]),n}(r.a.Component),Mi=Object(m.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:300,flexShrink:0},menuButton:Object(V.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),drawerPaper:{width:300},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}),{withTheme:!0})(Object(f.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,showDesktopMenu:e.snShowDesktopMenu,userSession:e.userSession,skyspaceList:e.snSkyspaceList,person:e.person}}),(function(e){return Object(Xe.bindActionCreators)({setMobileMenuDisplay:Fa,toggleMobileMenuDisplay:Ka,fetchSkyspaceList:Xn,toggleDesktopMenuDisplay:er},e)}))(_i)),Ui=n(822),Fi=n.n(Ui),Ki=n(821),Ri=n.n(Ki),Hi=n(184),Bi=n(253),Yi=n(1308),Wi=n(819);var Ji={Add:r.a.forwardRef((function(e,t){return r.a.createElement(gs.a,Object.assign({},e,{ref:t}))})),Check:r.a.forwardRef((function(e,t){return r.a.createElement(Cs.a,Object.assign({},e,{ref:t}))})),Clear:r.a.forwardRef((function(e,t){return r.a.createElement(Is.a,Object.assign({},e,{ref:t}))})),Delete:r.a.forwardRef((function(e,t){return r.a.createElement(Ke.a,Object.assign({},e,{ref:t}))})),DetailPanel:r.a.forwardRef((function(e,t){return r.a.createElement(xs.a,Object.assign({},e,{ref:t}))})),Edit:r.a.forwardRef((function(e,t){return r.a.createElement(Ls.a,Object.assign({},e,{ref:t}))})),Export:r.a.forwardRef((function(e,t){return r.a.createElement(Bs.a,Object.assign({},e,{ref:t}))})),Filter:r.a.forwardRef((function(e,t){return r.a.createElement(Ns.a,Object.assign({},e,{ref:t}))})),FirstPage:r.a.forwardRef((function(e,t){return r.a.createElement(Ms.a,Object.assign({},e,{ref:t}))})),LastPage:r.a.forwardRef((function(e,t){return r.a.createElement(Fs.a,Object.assign({},e,{ref:t}))})),NextPage:r.a.forwardRef((function(e,t){return r.a.createElement(xs.a,Object.assign({},e,{ref:t}))})),PreviousPage:r.a.forwardRef((function(e,t){return r.a.createElement(js.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.a.forwardRef((function(e,t){return r.a.createElement(Is.a,Object.assign({},e,{ref:t}))})),Search:r.a.forwardRef((function(e,t){return r.a.createElement(Ws.a,Object.assign({},e,{ref:t}))})),SortArrow:r.a.forwardRef((function(e,t){return r.a.createElement(Es.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:r.a.forwardRef((function(e,t){return r.a.createElement(Rs.a,Object.assign({},e,{ref:t}))})),ViewColumn:r.a.forwardRef((function(e,t){return r.a.createElement(Gs.a,Object.assign({},e,{ref:t}))}))},Gi=Object(Bi.a)({palette:{primary:{main:"#4caf50"},secondary:{main:"#ff9100"},info:{main:"#4caf50"}}});function zi(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}var Vi=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).closeSaveAlertMsg=function(){a.setState({saveAlertMsg:!1,alertMessage:null})},a.updatePortalData=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.setLoaderDisplay(!0),(n=a.props.snPortalsList).portals=t,Sn(a.props.userSession,n).then((function(e){a.props.setLoaderDisplay(!1),a.props.fetchPortalsListAction()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlePortalURLChange=function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.state.userSetting).setting.portal=t,a.setState({userSetting:n}),a.props.setLoaderDisplay(!0),e.next=6,mn(a.props.userSession,a.state.userSetting);case 6:a.props.setUserSettingAction(a.state.userSetting),a.props.setLoaderDisplay(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlePortalChange=function(e){console.log(e.target.type);var t=a.state.userSetting;t.setting.portal=e.target.value,a.setState({userSetting:t})},a.handleSave=function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,mn(a.props.userSession,a.state.userSetting);case 3:a.props.setUserSettingAction(a.state.userSetting),a.props.setLoaderDisplay(!1),null!=t&&t.hideAlert||a.setState({saveAlertMsg:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadUserSetting=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn(a.props.userSession);case 2:t=e.sent,a.props.fetchPortalsListAction(),a.setState({userSetting:t});case 5:case"end":return e.stop()}}),e)}))),a.createBackup=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r,s,o,i,c,l,p,u,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),e.next=3,hn(a.props.userSession);case 3:return s=e.sent,a.setState({userSetting:s}),o=(null===(n=a.state.userSetting)||void 0===n||null===(r=n.setting)||void 0===r?void 0:r.portal)||P,e.next=8,bn(a.props.userSession,o);case 8:return i=e.sent,e.next=11,new bt.SkynetClient(o).uploadFile(i);case 11:return c=e.sent,console.log("before HNS"),e.next=15,Object(Wi.a)("home.skapp",i,!1,{});case 15:return e.sent,console.log("After HNS"),l=(new Date).toString(),p={timestamp:l,name:"Backup_"+Vr()(l).format("MM/DD/YYYY h:mm a"),skylink:Object(bt.parseSkylink)(c)},u=a.state.userSetting,(d=u.setting.backupList||[]).unshift(p),u.setting.backupList=d,a.setState({userSetting:u}),e.next=26,mn(a.props.userSession,u);case 26:a.props.setLoaderDisplay(!1);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.copyToClipboard=function(e){navigator.clipboard.writeText(e)},a.handleHnsChange=function(e){var t=e.target.name,n=a.state.userSetting.setting.hnsconfig;(n=n||{})[t]=e.target.value;var r=a.state.userSetting;r.setting.hnsconfig=n,a.setState({userSetting:r})},a.handleHnsSave=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.handleSave({hideAlert:!0});case 1:case"end":return e.stop()}}),e)}))),a.validateHnsConfig=function(){var e,t,n,r,s,o,i,c,l,p,u,d,f,h,m,y,k=a.state.userSetting;return!(null==(null===k||void 0===k||null===(e=k.setting)||void 0===e||null===(t=e.hnsconfig)||void 0===t?void 0:t.domain)||""===(null===k||void 0===k||null===(n=k.setting)||void 0===n||null===(r=n.hnsconfig)||void 0===r?void 0:r.domain.trim())||null==(null===k||void 0===k||null===(s=k.setting)||void 0===s||null===(o=s.hnsconfig)||void 0===o?void 0:o.apikey)||""===(null===k||void 0===k||null===(i=k.setting)||void 0===i||null===(c=i.hnsconfig)||void 0===c?void 0:c.apikey.trim())||null==(null===k||void 0===k||null===(l=k.setting)||void 0===l||null===(p=l.hnsconfig)||void 0===p?void 0:p.apisecret)||""===(null===k||void 0===k||null===(u=k.setting)||void 0===u||null===(d=u.hnsconfig)||void 0===d?void 0:d.apisecret.trim())||null==(null===k||void 0===k||null===(f=k.setting)||void 0===f||null===(h=f.hnsconfig)||void 0===h?void 0:h.hnsgateway)||""===(null===k||void 0===k||null===(m=k.setting)||void 0===m||null===(y=m.hnsconfig)||void 0===y?void 0:y.hnsgateway.trim()))},a.restoreBackup=function(){var e=Object(O.a)(E.a.mark((function e(t){var n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.setLoaderDisplay(!0),n=t.skylink,r=Sr(n,a.state.userSetting),e.next=5,gn(a.props.userSession,r);case 5:return s=e.sent,e.prev=6,e.next=9,vn(a.props.userSession,s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("backup restored with error",e.t0);case 14:return a.props.fetchSkyspaceList(),a.props.fetchSkyspaceAppCount(),e.next=18,a.loadUserSetting();case 18:a.props.setLoaderDisplay(!1),a.setState({saveAlertMsg:!0,alertMessage:"Skyspace successfully restored with selected backup! Please re-login if changes do not reflect!"});case 20:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),a.confirmRestoreBackup=function(e){a.setState({backupRowData:e,showConfModal:!0})},a.state={saveAlertMsg:!1,showConfModal:!1,userSetting:null,showInfoModal:!1,backupRowData:null,alertMessage:null,columns:[{title:"Portal Name",field:"name"},{title:"Portal URL",field:"url"},{title:"Portal Type",field:"type",lookup:{Public:"Public",Private:"Private"}}],selectedRow:null,backup:{data:[],columns:[{title:"Name",field:"name"},{title:"Skylink",field:"skylink",render:function(e){return r.a.createElement(r.a.Fragment,null,e.skylink,r.a.createElement(Ue.a,{title:"Copy Skylink to clipboard",arrow:!0,onClick:function(){return a.copyToClipboard(e.skylink)}},r.a.createElement(Br.a,{className:"cursor-pointer",style:{color:x}})))},editable:"never"}]}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setLoaderDisplay(!0),this.loadUserSetting().then((function(){return e.props.setLoaderDisplay(!1)}))}},{key:"render",value:function(){var e,t,n,a,s,o,i,c,l,p=this,u=this.props,d=u.classes,f=u.snPortalsList,h=this.state,m=h.userSetting,k=h.columns;return r.a.createElement(Yi.a,{theme:Gi},r.a.createElement(y.a,null),r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(w.a,{container:!0,spacing:1},r.a.createElement(w.a,{item:!0,xs:10,sm:10},r.a.createElement("div",{className:"d-sm-flex align-items-center justify-content-between settings-header"},"Settings")),r.a.createElement(w.a,{item:!0,xs:8,sm:8,className:"select-grid"},r.a.createElement($s.a,{className:d.formControl},r.a.createElement(eo.a,{id:"portal-label"},"Select a default Skynet portal"),null!=m&&r.a.createElement(vo.a,{labelId:"portal-label",id:"portalList",fullWidth:!0,name:"portalList",value:m.setting.portal,onChange:this.handlePortalChange},f&&f.portals.map((function(e,t){return r.a.createElement(Eo.a,{key:t,value:e.url},e.url)}))),r.a.createElement(no.a,null))),r.a.createElement(w.a,{item:!0,xs:2,sm:2},r.a.createElement(xa.a,{variant:"contained",color:"primary",className:"btn-register-pg float-center",type:"button",onClick:this.handleSave,startIcon:r.a.createElement(co.a,null)},"Save")),r.a.createElement(w.a,{item:!0,sx:12,sm:10},r.a.createElement(Ss.a,{icons:Ji,title:"Skynet Portals",columns:k,data:(this.props.snPortalsList?this.props.snPortalsList.portals:[]).filter((function(e){return null!=e})),options:{actionsColumnIndex:-1},editable:{onRowAdd:function(e){return console.log("row added"),new Promise((function(t,n){setTimeout((function(){p.updatePortalData([].concat(Object(g.a)(f.portals),[e])),t()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(n,a){setTimeout((function(){var a=Object(g.a)(f.portals);a[t.tableData.id]=e,p.updatePortalData(Object(g.a)(a)),t.url===m.setting.portal&&p.handlePortalURLChange(e.url),n()}),1e3)}))},onRowDelete:function(e){return new Promise((function(t,n){setTimeout((function(){if(e.url===m.setting.portal)alert(e.url+" is default skynet portal for SkySpaces. Please change default portal and try. ");else{var n=Object(g.a)(f.portals),a=e.tableData.id;n.splice(a,1),p.updatePortalData(Object(g.a)(n))}t()}),1e3)}))}}})),r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(xa.a,{variant:"contained",color:"primary",className:"btn-register-pg float-center",type:"button",onClick:this.createBackup,startIcon:r.a.createElement(Ri.a,null)},"Create Backup"),(null===m||void 0===m||null===(e=m.setting)||void 0===e?void 0:e.backupList)&&r.a.createElement(Ss.a,{icons:Ji,title:"Backups",columns:this.state.backup.columns,data:m.setting.backupList.filter((function(e){return null!=e})),actions:[{icon:function(){return r.a.createElement(Fi.a,null)},tooltip:"Restore Backup",onClick:function(e,t){return p.confirmRestoreBackup(t)}}],editable:{onRowUpdate:function(e,t){var n=Object(g.a)(m.setting.backupList);return n[t.tableData.id]=e,m.setting.backupList=n,p.setState({userSetting:m}),p.handleSave({hideAlert:!0})}},options:{actionsColumnIndex:-1}})),m&&r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Hi.a,{elevation:2},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(Ja.a,null,"HNS Configuration (** Work In Progress **)"),r.a.createElement(xa.a,{variant:"contained",color:"primary",className:"btn-register-pg float-center",type:"button",onClick:this.handleHnsSave,disabled:!0,startIcon:r.a.createElement(co.a,null)},"Save")),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(Aa.a,{id:"domain",name:"domain",label:"HNS Domain",value:null===m||void 0===m||null===(t=m.setting)||void 0===t||null===(n=t.hnsconfig)||void 0===n?void 0:n.domain,fullWidth:!0,autoComplete:"off",onChange:this.handleHnsChange,helperText:"HNS domain name is a mandatory field.",disabled:"true"})),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(Aa.a,{id:"apikey",name:"apikey",label:"HNS Apikey",fullWidth:!0,value:null===m||void 0===m||null===(a=m.setting)||void 0===a||null===(s=a.hnsconfig)||void 0===s?void 0:s.apikey,autoComplete:"off",onChange:this.handleHnsChange,helperText:"HNS apikey is a mandatory field.",disabled:"true"})),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(Aa.a,{id:"apisecret",name:"apisecret",label:"HNS Secret",fullWidth:!0,value:null===m||void 0===m||null===(o=m.setting)||void 0===o||null===(i=o.hnsconfig)||void 0===i?void 0:i.apisecret,autoComplete:"off",onChange:this.handleHnsChange,helperText:"HNS Secret is a mandatory field.",disabled:"true"})),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(Aa.a,{id:"hnsgateway",name:"hnsgateway",label:"HNS Gateway",fullWidth:!0,autoComplete:"off",value:null===m||void 0===m||null===(c=m.setting)||void 0===c||null===(l=c.hnsconfig)||void 0===l?void 0:l.hnsgateway,onChange:this.handleHnsChange,helperText:"HNS Gateway is a mandatory field.",disabled:"true"})))))),r.a.createElement(ie.a,{open:this.state.saveAlertMsg,autoHideDuration:4e3,onClose:this.closeSaveAlertMsg},r.a.createElement(zi,{onClose:this.closeSaveAlertMsg,severity:"success"},null!=this.state.alertMessage?this.state.alertMessage:"Default Skynet Protal is successfully changed to "+(m&&m.setting.portal))),r.a.createElement(Gr,{open:this.state.showInfoModal,onClose:function(){return p.setState({showInfoModal:!1})},title:"Backup Error",content:"Please provide HNS configuration before creating backup."}),r.a.createElement(di,{open:this.state.showConfModal,onYes:function(){p.setState({showConfModal:!1}),p.restoreBackup(p.state.backupRowData)},onNo:function(){return p.setState({showConfModal:!1})},title:"Warning!",content:"This action will permanently revert your Skyspace to the selected restore point. Do you want to continue?"}))}}]),n}(r.a.Component),Zi=Object(m.a)((function(e){return{formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)}}}))(Object(f.b)((function(e){return{isShowing:e.snLoader,skyapp:e.snAppDetail,userSession:e.userSession,person:e.person,snSkyspaceList:e.snSkyspaceList,snPortalsList:e.snPortalsList,snInfoModalState:e.snInfoModalState,snAppSkyspaces:e.snAppSkyspaceList,snAppSkyspacesToChange:JSON.parse(JSON.stringify(e.snAppSkyspaceList))}}),(function(e){return Object(Xe.bindActionCreators)({setLoaderDisplay:Ye,fetchAppDetail:Bn,fetchSkyspaceAppDetail:Yn,fetchEmptyApp:Wn,createSkapp:zn,setInfoModalState:Rn,setAppSkyspces:Hn,setUserSettingAction:Zn,setPortalsListAction:ra,fetchPortalsListAction:sa,fetchSkyspaceList:Xn,fetchSkyspaceAppCount:ya},e)}))(Vi)),Qi=Object(Be.a)((function(e){return{root:{maxWidth:345},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ga.a[500]},cardHeader:{paddingTop:5,paddingBottom:5},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2)},downloadGrid:{paddingTop:20}}}));function qi(e){return r.a.createElement(Ar.a,Object.assign({elevation:6,variant:"filled"},e))}function Xi(e){var t=Qi(),n=Object(f.c)(),s=new URLSearchParams(Object(S.g)().search),o=Object(a.useState)(et()),i=Object(Z.a)(o,1)[0],c=Object(a.useState)([]),l=Object(Z.a)(c,2),p=l[0],u=l[1],d=Object(a.useState)([]),h=Object(Z.a)(d,2),m=h[0],y=h[1],k=Object(a.useState)([]),g=Object(Z.a)(k,2),v=g[0],C=g[1],j=Object(a.useState)(!1),A=Object(Z.a)(j,2),T=A[0],I=A[1],P=r.a.createRef(),L=Object(a.useState)(!1),D=Object(Z.a)(L,2),N=D[0],_=D[1],M=Object(a.useState)(""),U=Object(Z.a)(M,2),F=U[0],K=U[1],R=Object(a.useState)("success"),H=Object(Z.a)(R,2),B=H[0],Y=H[1],W=Object(f.d)((function(e){return e.userSession})),J=Object(f.d)((function(e){return e.snSkyspaceList})),G=Object(f.d)((function(e){return e.person})),z=Object(f.d)((function(e){return e.snUserSetting})),V=$e();Object(a.useEffect)((function(){Q()}),[G]),Object(a.useEffect)((function(){Q()}),[s.get("sharedhash")]),Object(a.useEffect)((function(){Q()}),[]);var Q=function(){null!=G&&(null!=s.get("sharedhash")&&I(!0))},q=function(){var e=Object(O.a)(E.a.mark((function e(t){var a,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=21;break}return(a=Object(b.a)(Object(b.a)({},$e()),t)).tags=p,a.skyspaceList=m,Cr(a.contentType,a),e.next=7,zt(W,a,G);case 7:if(r=e.sent,e.t0=m&&m.length>0,!e.t0){e.next=12;break}return e.next=12,an(W,r,m);case 12:return n(ya()),(s=Object(b.a)(Object(b.a)({},{skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}),a)).fileName=a.name,s.action="Upload",s.skyspaces=a.skyspaceList,s.savedToSkySpaces=m&&m.length>0,s.skhubId=r,e.next=21,un(W,s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(O.a)(E.a.mark((function e(t){var a,r,o,i,c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),n(Ye(!0)),r=t.filter((function(e){return!J.includes(e)})),e.next=5,wt(s.get("sharedhash"));case 5:return o=e.sent,i=[],c=[],null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.map((function(e){e.skhubId=null,i.push(Jt(W,e,G).then((function(e){return c.push(e)})))})),r&&r.length>0&&i.push(qt(W,r)),e.next=12,Promise.all(i);case 12:return i.length=0,(l={skylink:"",fileName:"",contentLength:"",contentType:"",httpMetadata:"",action:"",skhubId:"",skyspaces:[],savedToSkySpaces:!1}).fileName="NA",l.action="Public Import",l.skyspaces=t.join(", "),l.savedToSkySpaces=t&&t.length>0,l.skylink=s.get("sharedhash"),i.push(un(W,l)),i.push(Gt(W,c)),i.push(an(W,c,t)),e.next=24,Promise.all(i);case 24:n(Ye(!1)),n(Xn()),n(ya());case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(w.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(w.a,{item:!0,xs:12,sm:10,style:{color:"red",paddingTop:20}},"Warning: Content uploaded using SkySpaces is not encrypted."),G&&r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"select-grid"},r.a.createElement($s.a,{className:t.formControl,error:i.type},J&&r.a.createElement(Ba.a,{multiple:!0,options:J,getOptionLabel:function(e){return e},name:"skyspaceList",onChange:function(e,t){return y(t)},renderInput:function(e){return r.a.createElement(Aa.a,Object.assign({},e,{label:"Skyspace",margin:"normal"}))}}),r.a.createElement(no.a,null,"Please select Space. This is a mandatory field."))),G&&r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"select-grid"},r.a.createElement($s.a,{className:t.formControl,error:i.tags},r.a.createElement(ro.a,{defaultValue:V.tags,onChange:u}),r.a.createElement(no.a,null,"Please select tags."))),!G&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{item:!0,xs:11,sm:9,className:"dropzone-grid"},r.a.createElement(Aa.a,{id:"dnldSkylink",name:"dnldSkylink",label:"Please enter Skylink to download",fullWidth:!0,autoComplete:"off",onChange:function(e){return C(e.target.value)}})),r.a.createElement(w.a,{item:!0,xs:1,sm:1,className:"padding-t-20"},r.a.createElement(Ue.a,{title:"Download Skylink Content",arrow:!0},r.a.createElement(Po.a,{style:{color:x,fontSize:35,cursor:"pointer"},onClick:function(){try{var e=Object(bt.parseSkylink)(v);br(e,z)}catch(t){_(!0),Y("error"),K("Invalid skylink!")}}})))),r.a.createElement(w.a,{item:!0,xs:12,sm:10,className:"dropzone-grid"},r.a.createElement($s.a,{className:"full-width",id:"file-dropzone",error:i.files},r.a.createElement(Fr,{name:"files",ref:P,portal:kr(z),fileList:V.files,onUpload:q}),r.a.createElement(no.a,null,"Please select a file to upload.")))),r.a.createElement(ie.a,{open:N,autoHideDuration:4e3,onClose:function(){return _(!1)}},r.a.createElement(qi,{onClose:function(){return _(!1)},severity:B||"success"},F)),r.a.createElement(Wa,{userSession:W,title:"Import Into Existing Space Or Add To New Space",open:T,disableBackdropClick:!0,disableEscapeKeyDown:!0,availableSkyspaces:J,showAddSkyspace:!0,onClose:function(){return I(!1)},onSave:X}))}var $i=n(823);if("idtest.local"==window.location.hostname||"localhost"==window.location.hostname||"file:"==window.location.protocol)var ec=!0;else ec=!1;var tc={devMode:ec},nc=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getPublicToAccHash=function(){return new URLSearchParams(a.props.location.search).get("sharedhash")},a.initializeSkyId=function(){var e=new $i.a("SkySpaces",a.skyidEventCallback,tc);a.setState({skyid:e})},a.handleSeedChange=function(e){a.setState({seed:e.target.value})},a.login=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.state.skyid.sessionStart(),a.props.setLoaderDisplay(!0);case 2:case"end":return e.stop()}}),e)}))),a.state={seed:null,skyid:null},a.onSkyIdSuccess=a.onSkyIdSuccess.bind(Object(C.a)(a)),a.skyidEventCallback=a.skyidEventCallback.bind(Object(C.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initializeSkyId(),!1===this.props.showDesktopMenu&&this.props.setDesktopMenuState(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"onSkyIdSuccess",value:function(){var e=Object(O.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={idp:"SKYID",skyid:this.state.skyid},e.next=3,yn(n);case 3:return a=e.sent,n=Object(b.a)(Object(b.a)({},n),{},{person:a}),this.props.setUserSession(n),this.props.setPersonGetOtherData(a),e.t0=this.props,e.next=10,Pn(n);case 10:e.t1=e.sent,e.t0.setImportedSpace.call(e.t0,e.t1),this.props.setLoaderDisplay(!1),this.props.history.push("/upload"+this.props.location.search);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"skyidEventCallback",value:function(e){switch(e){case"login_fail":console.log("Login failed");break;case"login_success":console.log("Login succeed!"),this.onSkyIdSuccess(e);break;case"destroy":console.log("Logout succeed!");break;default:console.log(e)}}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.paddingTop},r.a.createElement(Hi.a,{className:e.padding,style:{borderBlockColor:"lightGreen"}},r.a.createElement("div",{className:e.margin},r.a.createElement(w.a,{container:!0,justify:"center",alignItems:"center",style:{marginTop:"10px"}},r.a.createElement(w.a,{item:!0,md:!0,sm:!0,xs:!0,justify:"center"},r.a.createElement("div",{className:"blockquote",color:"primary"},"Skynet App Store - Explore power of Free Internet Apps!"))),r.a.createElement(w.a,{container:!0,justify:"center",style:{marginTop:"10px"}},r.a.createElement(xa.a,{onClick:this.login,variant:"contained",style:{textTransform:"none"},size:"medium",className:"${classes.margin} btn-login"},"Login with SkyID")),r.a.createElement(w.a,{container:!0,justify:"center",alignItems:"center",style:{marginTop:"10px"}},r.a.createElement(w.a,{item:!0,md:!0,sm:!0,xs:!0,justify:"center"},r.a.createElement("div",{className:"h3-responsive",style:{color:"grey"}},"SkyID is thirdpaty Skapp. you can review code here github link!"))))))}}]),n}(r.a.Component),ac=Object(m.a)((function(e){return{margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit},paddingTop:{paddingTop:200}}}),{withTheme:!0})(Object(f.b)((function(e){return{showMobileMenu:e.snShowMobileMenu,showDesktopMenu:e.snShowDesktopMenu,userSession:e.userSession,person:e.person}}),(function(e){return Object(Xe.bindActionCreators)({setMobileMenuDisplay:Fa,setLoaderDisplay:Ye,toggleMobileMenuDisplay:Ka,setUserSession:Do,setPerson:$n,setPersonGetOtherData:ea,setImportedSpace:No,toggleDesktopMenuDisplay:er,setDesktopMenuState:$a},e)}))(nc));function rc(e){var t=Object(a.useState)(null),n=Object(Z.a)(t,2),s=n[0],o=n[1],i=Object(a.useState)(null),c=Object(Z.a)(i,2),l=(c[0],c[1],Object(a.useState)(!1)),p=Object(Z.a)(l,2);p[0],p[1];return r.a.createElement("div",{className:"container-fluid register-container"},r.a.createElement(w.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(w.a,{item:!0,xs:12,sm:10},r.a.createElement(Aa.a,{id:"firstName",name:"firstName",label:"First Name","aria-setter":o,fullWidth:!0,value:s,autoComplete:"off",helperText:"First Name",onChange:function(e){console.log(e.target)}}))))}var sc=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={displayMenu:!1},a}return Object(c.a)(n,[{key:"displayMenu",value:function(){return!(this.props.location.pathname.indexOf("login")>-1)}},{key:"render",value:function(){var e,t=this.props.classes;this.state.displayMenu;return e=r.a.createElement(Mi,null),r.a.createElement(k.a,null,r.a.createElement("div",{className:t.root+" router-root"},r.a.createElement(y.a,null),r.a.createElement(Ho,{onDrawerToggle:this.handleDrawerToggle}),e,r.a.createElement("main",{className:t.content+" router-main"},r.a.createElement("div",{className:t.toolbar},r.a.createElement("div",{id:"content-wrapper",className:"d-flex flex-column"},r.a.createElement("div",{id:"content"},r.a.createElement(S.d,null,r.a.createElement(S.b,{exact:!0,path:"/"},r.a.createElement(S.a,{to:"/login"})),r.a.createElement(S.b,{path:"/upload",component:Xi}),r.a.createElement(S.b,{path:"/settings",component:Zi}),r.a.createElement(S.b,{path:"/login",component:ac}),r.a.createElement(S.b,{path:"/register",component:yo}),r.a.createElement(S.b,{path:"/apps/:category",component:ys}),r.a.createElement(S.b,{path:"/skylinks",component:ys}),r.a.createElement(S.b,{path:"/skyapps/:id",component:yo}),r.a.createElement(S.b,{path:"/skyspace/:skyspace",component:ys}),r.a.createElement(S.b,{path:"/history",component:Xs}),r.a.createElement(S.b,{path:"/profile",component:rc}),r.a.createElement(S.b,{path:"/public-cards",component:ys}),r.a.createElement(S.b,{path:"/imported-spaces/:sender/:skyspace",component:ys}),r.a.createElement(S.b,{path:"/imported-skyapps/:sender/:id",component:yo}),r.a.createElement(S.b,{component:Xi}))))))))}}]),n}(r.a.Component),oc=Object(m.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(1),"padding-top":"20px"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(sc),ic=n(543),cc=n(824),lc=n(542),pc=n.n(lc),uc=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e;return r.a.createElement("footer",{className:pc.a.fixfooter},r.a.createElement(w.a,{container:!0,className:pc.a.root,spacing:1,justify:"center",alignContent:"center"},r.a.createElement(w.a,{item:!0,className:"font-weight-bold"},r.a.createElement(qe.a,(e={rel:"noreferrer",href:"https://github.com/skynethubio/skhub-appstore-ui#donation",target:"_blank"},Object(V.a)(e,"rel","noreferrer"),Object(V.a)(e,"style",{color:x}),e),"Donate"),r.a.createElement("span",{className:"FooterTextspan"},"|")),r.a.createElement(w.a,{item:!0,className:"font-weight-bold"},r.a.createElement(qe.a,{rel:"noopener noreferrer",target:"_blank",href:"SkySpaces-Privacy Notice.pdf",style:{color:x}},"Privacy"),r.a.createElement("span",{className:"FooterTextspan"},"|")),r.a.createElement(w.a,{item:!0,className:"font-weight-bold"},r.a.createElement(qe.a,{rel:"noopener noreferrer",target:"_blank",href:"SkySpaces-Terms.pdf",style:{color:x}},"Terms"),r.a.createElement("span",{className:"FooterTextspan"},"|")),r.a.createElement(w.a,{item:!0},r.a.createElement("a",{href:"https://twitter.com/HelloSkySpaces",target:"_blank",rel:"noopener noreferrer",className:"FooterTextspan"},r.a.createElement(le.a,{icon:ic.b,size:"1x"}))),r.a.createElement(w.a,{item:!0},r.a.createElement("a",{href:"https://discord.gg/w7TWJR",target:"_blank",rel:"noopener noreferrer",className:"FooterTextspan"},r.a.createElement(le.a,{icon:ic.a,size:"1x"}))),r.a.createElement(w.a,{item:!0},r.a.createElement("a",{href:"https://feedback-skyspaces.herokuapp.com",target:"_blank",rel:"noopener noreferrer",className:"FooterTextspan"},r.a.createElement(le.a,{icon:cc.a,size:"1x"}))),r.a.createElement(w.a,{item:!0},r.a.createElement("a",{href:"mailto:hello@skyspaces.io",target:"_blank",rel:"noopener noreferrer",className:"FooterTextspan"},r.a.createElement(le.a,{icon:d.d,size:"1x"})))))}}]),n}(r.a.Component);u.b.add(d.d,d.e,d.g,d.b,d.h,d.i,d.a,d.j,d.f,d.c);var dc={redirectTo:"/",manifestPath:"/manifest.json",authOrigin:"",userSession:Y,finished:function(e){var t=e.userSession;console.log(t.loadUserData())},appDetails:H},fc=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),console.log=function(){},a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(zs.Connect,{authOptions:dc},r.a.createElement(h,null),r.a.createElement(oc,null),r.a.createElement(uc,null)))}}]),n}(r.a.Component),hc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(f.a,{store:ha},r.a.createElement(fc,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");hc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):mc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):mc(t,e)}))}}()},322:function(e,t,n){e.exports={wrapperItem:"UploadItem_wrapperItem__3-eZx",leftSide:"UploadItem_leftSide__2BBwy",progressBar:"UploadItem_progressBar__3LgSF",percentage:"UploadItem_percentage__2GEVq"}},438:function(e,t,n){e.exports={wrapper:"UploadProgress_wrapper__1OwwX",uploadFileStatusTitle:"UploadProgress_uploadFileStatusTitle__1gflJ",progressContainer:"UploadProgress_progressContainer__28L0y",closeButton:"UploadProgress_closeButton__bO3xf"}},482:function(e,t){},499:function(e,t){},515:function(e,t){},542:function(e,t,n){},588:function(e,t,n){},807:function(e,t,n){e.exports=n.p+"static/media/SkySpaces_g.531bd028.png"},808:function(e,t,n){e.exports=n.p+"static/media/SkySpaces_logo_transparent_small.ffb0dfa9.png"},810:function(e,t,n){e.exports=n.p+"static/media/SkySpaces_logo.1f88e98a.png"},815:function(e,t,n){e.exports=n.p+"static/media/Sia.7dd07c88.svg"},819:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(5),r=n.n(a),s=n(820),o=n(7),i=n(541),c=n.n(i),l=n(43),p="nameserver",u="https://www.namebase.io",d="",f="",h="https://siasky.net/",m=function(){var t=Object(o.a)(r.a.mark((function t(n,a,o,i){var m,y,k,S,b,g,v,E,O,C,w,j;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(s.a)(i),m=e.from("".concat(d,":").concat(f)),y=m.toString("base64"),k="Basic "+y,S=n.substring(0,n.lastIndexOf(".")),b=S?n.substring(n.lastIndexOf(".")+1):S,g=S||b,v=h,console.log(" skynet portal "+v),console.log(" tld "+b+" subdomain "+g),E="","blockchain"!==p){t.next=15;break}E="/api/v0/dns/domains/".concat(b),t.next=24;break;case 15:if("blockchain-advanced"!==p){t.next=19;break}E="/api/v0/dns/domains/".concat(b,"/advanced"),t.next=24;break;case 19:if("nameserver"!==p){t.next=23;break}E="/api/v0/dns/domains/".concat(b,"/nameserver"),t.next=24;break;case 23:throw new Error("Service should be 'blockchain', 'blockchain-advanced' or 'nameserver'");case 24:return O=u+E,C='{"records":[{ "type": "TXT", "host": "'+g+'", "value": "TEST", "ttl": 60 }],"deleteRecords":[]}',t.next=28,new l.SkynetClient(v).uploadFile(a);case 28:return w=t.sent,console.log("uploadedContent"+w.json),j={method:"PUT",body:C,headers:{Authorization:k,Accept:"application/json","Content-Type":"application/json"}},t.abrupt("return",c()(O,j).then((function(e){e.json(),console.log(e.json())})).catch((function(e){return e})));case 32:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()}).call(this,n(8).Buffer)},833:function(e,t,n){e.exports=n(1258)},839:function(e,t,n){},856:function(e,t){},858:function(e,t){},869:function(e,t){},871:function(e,t){},881:function(e,t){},883:function(e,t){},960:function(e,t){},967:function(e,t){}},[[833,1,2]]]);